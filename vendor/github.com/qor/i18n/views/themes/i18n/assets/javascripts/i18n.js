"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function i(n,e){this.$element=t(n),this.options=t.extend({},i.DEFAULTS,t.isPlainObject(e)&&e),this.multiple=!1,this.init()}function n(i){var n=[];return t.isPlainObject(i)&&t.each(i,function(t,i){n.push([t,i].join("="))}),n.join("&")}function e(i){var n={};return i&&(i=i.replace("?","").split("&"),t.each(i,function(t,i){i=i.split("="),t=i[0],n[t]=i[1]})),n}var s=window.location;i.prototype={contructor:i,init:function(){var t=this.$element;this.$languages=t.find(".qor-js-language"),this.$items=t.find(".i18n-list > li"),this.bind()},bind:function(){this.$element.on("click.qor.i18n",t.proxy(this.click,this)).on("change.qor.i18n",t.proxy(this.change,this)),this.$languages.on("change.qor.i18n",t.proxy(this.reload,this))},unbind:function(){this.$element.off("click.qor.i18n").off("change.qor.i18n"),this.$languages.off("change.qor.i18n")},click:function(i){var n,e,s=t(i.target),o=this.$items;if(s.is("button")||(e=s.closest("button")),e&&1===e.length?s=e:(n=s.closest(".i18n-list-item"),n.hasClass("active highlight")||(s=n)),!(s.data()&&s.data().url||!s.length))switch(String(s.data("toggle")).replace(".qor.i18n","")){case"bulk":this.multiple=!0,s.addClass("hidden").siblings("button").removeClass("hidden"),o.addClass("active highlight").find(".qor-js-translator").trigger("input");break;case"exit":this.multiple=!1,s.addClass("hidden"),s.siblings("button").addClass("hidden").filter(".qor-js-bulk").removeClass("hidden"),o.removeClass("active highlight");break;case"edit":o.removeClass("active highlight"),s.closest("li").addClass("active highlight").find(".qor-js-translator").trigger("input");break;case"save":n=s.closest("li"),this.submit(n.find("form"),function(){n.removeClass("active highlight")});break;case"cancel":s.closest("li").removeClass("active highlight");break;case"copy":n=s.closest("li"),n.find(".qor-js-translator").val(n.find(".qor-js-translation-source").text()).trigger("input");break;case"copyall":o.find(".qor-js-copy").click()}},change:function(i){var n=t(i.target);n.is(".qor-js-translator")&&(this.multiple&&this.submit(n.closest("form"),function(t){var i=t.find(".qor-js-help");i.addClass("in"),setTimeout(function(){i.removeClass("in")},3e3)}),n.trigger("input"))},reload:function(i){var o=t(i.target),a=e(s.search);a[o.attr("name")]=o.val(),s.search=n(a)},submit:function(i,n){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,i.is("form")&&t.ajax(s.pathname,{method:"POST",data:i.serialize(),success:function(){i.siblings(".qor-js-translation-target").text(i.find(".qor-js-translator").val()),t.isFunction(n)&&n(i)}})},destroy:function(){this.unbind(),this.$element.removeData("qor.i18n")}},i.DEFAULTS={},i.plugin=function(n){return this.each(function(){var e,s=t(this),o=s.data("qor.i18n");o||s.data("qor.i18n",o=new i(this,n)),"string"==typeof n&&t.isFunction(e=o[n])&&e.apply(o)})},t(function(){i.plugin.call(t(".qor-i18n"))})});