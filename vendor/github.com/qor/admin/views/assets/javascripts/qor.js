"use strict";$.fn.qorSliderAfterShow=$.fn.qorSliderAfterShow||{},window.QOR={$formLoading:'<div id="qor-submit-loading" class="clearfix"><div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div></div>'},window.Mustache&&(window.Mustache.tags=["[[","]]"]),$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||$.fn.qorSlideoutBeforeHide&&($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),$.fn.select2.ajaxCommonOptions=function(t){var e=t.remoteDataPrimaryKey;return{dataType:"json",cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,i){i.page=i.page||1;var o=$.map(t,function(t){return t.id=t[e]||t.primaryKey||t.Id||t.ID,t});return{results:o,pagination:{more:o.length>=20}}}}},$.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=e.length>0?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?$(i):i};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};$(function(){var t=window._,e=window.QOR,i=$('<div id="dialog" style="display: none;">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content">\n                        <p><i class="material-icons">warning</i></p>\n                        <p class="mdl-dialog__message dialog-message">\n                        </p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                          ok\n                        </button>\n                        <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                          cancel\n                        </button>\n                      </div>\n                    </div>\n                </div>').appendTo("body");$(document).on("keyup.qor.confirm",function(t){i.is(":visible")&&(27===t.which&&setTimeout(function(){i.hide(),e.qorConfirmCallback=void 0},100),13===t.which&&setTimeout(function(){$('.dialog-button[data-type="confirm"]').click()},100))}).on("click.qor.confirm",".dialog-button",function(){var t=$(this).data("type"),o=e.qorConfirmCallback;return $.isFunction(o)&&o(t),i.hide(),e.qorConfirmCallback=void 0,!1}),e.qorConfirm=function(o,n){var r=i.find(".dialog-ok"),s=i.find(".dialog-cancel");return t.isString(o)?(i.find(".dialog-message").text(o),r.text("ok"),s.text("cancel")):t.isObject(o)&&(o.confirmOk&&o.confirmCancel?(r.text(o.confirmOk),s.text(o.confirmCancel)):(r.text("ok"),s.text("cancel")),i.find(".dialog-message").text(o.confirm)),i.show(),e.qorConfirmCallback=n,!1};var o=function t(e,i){var o=i||new FormData,n=void 0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&(n=r),e[r]instanceof Date?o.append(n,e[r].toISOString()):"object"!==_typeof(e[r])||e[r]instanceof File?o.append(n,e[r]):t(e[r],o);return o};e.qorAjaxHandleFile=function(e,i,n,r){var s=new XMLHttpRequest;s.responseType="arraybuffer",s.open("POST",e,!0),s.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:i}),e=window.URL.createObjectURL(t),o=document.createElement("a");document.body.appendChild(o),o.href=e,o.download=n||"download-"+$.now(),o.click()}else window.alert("server error, please try again!")},t.isObject(r)&&("[object FormData]"!=Object.prototype.toString.call(r)&&(r=o(r)),s.send(r))};var n=function(){var t=$(".qor-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=$(this).data("video-link");t.match(e)&&$(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'+t.replace(e,"$1")+'" frameborder="0" allowfullscreen></iframe>')})};$.fn.qorSliderAfterShow.converVideoLinks=n,n(),e.handleAjaxError=function(t){var e=$("body"),i=t.responseJSON,o=t.responseText,n=$('<ul class="qor-alert qor-error" data-dismissible="true"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n                            <i class="material-icons">close</i>\n                        </button></ul>');if(e.find(".qor-alert").remove(),422===t.status)if(i){for(var r=i.errors,s="",a=0;a<r.length;a++)s+='<li>\n                                        <i class="material-icons">error</i>\n                                        <span>'+r[a]+"</span>\n                                    </li>";n.append(s)}else n=$(o).find(".qor-error");else n.append('<li>\n                            <i class="material-icons">error</i>\n                            <span>'+t.statusText+"</span>\n                        </li>");n.prependTo(e),setTimeout(function(){n.addClass("qor-alert__active")},50),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').removeClass("qor-alert__active"),$("#qor-submit-loading").remove()},6e3)}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return S.call(t).slice(8,-1).toLowerCase()}function i(t){return"string"==typeof t}function o(t){return"number"==typeof t&&!isNaN(t)}function n(t){return void 0===t}function r(t){return"date"===e(t)}function s(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(o(e)&&i.push(e),i.slice.apply(t,i))}function a(t,e){var i=s(arguments,2);return function(){return t.apply(e,i.concat(s(arguments)))}}function l(t){return t%4==0&&t%100!=0||t%400==0}function d(t,e){return[31,l(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function c(t){var e,i,o=String(t).toLowerCase(),n=o.match(g);if(!n||0===n.length)throw new Error("Invalid date format.");for(t={source:o,parts:n},e=n.length,i=0;i<e;i++)switch(n[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function u(e,i){i=t.isPlainObject(i)?i:{},i.language&&(i=t.extend({},u.LANGUAGES[i.language],i)),this.$element=t(e),this.options=t.extend({},u.DEFAULTS,i),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var h=t(window),f=window.document,p=t(f),m=window.Number,b="datepicker",y="click.datepicker",g=/(y|m|d)+/g,v=/\d+/g,q=/^\d{2,4}$/,_=["datepicker-top-left","datepicker-top-right","datepicker-bottom-left","datepicker-bottom-right"].join(" "),w="datepicker-hide",k=Math.min,S=Object.prototype.toString;u.prototype={constructor:u,init:function(){var e=this.options,i=this.$element,o=e.startDate,n=e.endDate,r=e.date;this.$trigger=t(e.trigger||i),this.isInput=i.is("input")||i.is("textarea"),this.isInline=e.inline&&(e.container||!this.isInput),this.format=c(e.format),this.initialValue=this.getValue(),r=this.parseDate(r||this.initialValue),o&&(o=this.parseDate(o),r.getTime()<o.getTime()&&(r=new Date(o)),this.startDate=o),n&&(n=this.parseDate(n),o&&n.getTime()<o.getTime()&&(n=new Date(o)),r.getTime()>n.getTime()&&(r=new Date(n)),this.endDate=n),this.date=r,this.viewDate=new Date(r),this.initialDate=new Date(this.date),this.bind(),(e.autoshow||this.isInline)&&this.show(),e.autopick&&this.pick()},build:function(){var e,i=this.options,o=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=e=t(i.template),this.$week=e.find('[data-view="week"]'),this.$yearsPicker=e.find('[data-view="years picker"]'),this.$yearsPrev=e.find('[data-view="years prev"]'),this.$yearsNext=e.find('[data-view="years next"]'),this.$yearsCurrent=e.find('[data-view="years current"]'),this.$years=e.find('[data-view="years"]'),this.$monthsPicker=e.find('[data-view="months picker"]'),this.$yearPrev=e.find('[data-view="year prev"]'),this.$yearNext=e.find('[data-view="year next"]'),this.$yearCurrent=e.find('[data-view="year current"]'),this.$months=e.find('[data-view="months"]'),this.$daysPicker=e.find('[data-view="days picker"]'),this.$monthPrev=e.find('[data-view="month prev"]'),this.$monthNext=e.find('[data-view="month next"]'),this.$monthCurrent=e.find('[data-view="month current"]'),this.$days=e.find('[data-view="days"]'),this.isInline?t(i.container||o).append(e.addClass("datepicker-inline")):(t(f.body).append(e.addClass("datepicker-dropdown")),e.addClass(w)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.on("show.datepicker",e.show),t.isFunction(e.hide)&&i.on("hide.datepicker",e.hide),t.isFunction(e.pick)&&i.on("pick.datepicker",e.pick),this.isInput&&(i.on("keyup.datepicker",t.proxy(this.keyup,this)),e.trigger||i.on("focus.datepicker",t.proxy(this.show,this))),this.$trigger.on(y,t.proxy(this.show,this))},unbind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.off("show.datepicker",e.show),t.isFunction(e.hide)&&i.off("hide.datepicker",e.hide),t.isFunction(e.pick)&&i.off("pick.datepicker",e.pick),this.isInput&&(i.off("keyup.datepicker",this.keyup),e.trigger||i.off("focus.datepicker",this.show)),this.$trigger.off(y,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,o=this.$daysPicker,n=this.format;if(n.hasYear||n.hasMonth||n.hasDay)switch(m(t)){case 2:case"years":i.addClass(w),o.addClass(w),n.hasYear?(this.fillYears(),e.removeClass(w)):this.showView(0);break;case 1:case"months":e.addClass(w),o.addClass(w),n.hasMonth?(this.fillMonths(),i.removeClass(w)):this.showView(2);break;default:e.addClass(w),i.addClass(w),n.hasDay?(this.fillDays(),o.removeClass(w)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,o=p.outerWidth(),n=p.outerHeight(),r=e.outerWidth(),s=e.outerHeight(),a=i.width(),l=i.height(),d=e.offset(),c=d.left,u=d.top,h=parseFloat(t.offset)||10,f="datepicker-top-left";u>l&&u+s+l>n?(u-=l+h,f="datepicker-bottom-left"):u+=s+h,c+a>o&&(c=c+r-a,f=f.replace("left","right")),i.removeClass(_).addClass(f).css({top:u,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(e,i){var o=t.Event(e,i);return this.$element.trigger(o),o},createItem:function(e){var i=this.options,o=i.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return t.extend(n,e),"<"+o+" "+(n.disabled?'class="'+i.disabledClass+'"':n.picked?'class="'+i.pickedClass+'"':n.muted?'class="'+i.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+o+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var e,i=this.options,o=parseInt(i.weekStart,10)%7,n=i.daysMin,r="";for(n=t.merge(n.slice(o),n.slice(0,o)),e=0;e<=6;e++)r+=this.createItem({text:n[e]});this.$week.html(r)},fillYears:function(){var e,i=this.options,o=i.disabledClass||"",n=i.yearSuffix||"",r=t.isFunction(i.filter)&&i.filter,s=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getMonth(),u=l.getDate(),h=this.date,f=h.getFullYear(),p=!1,m=!1,b=!1,y=!1,g=!1,v="";for(e=-5;e<=6;e++)h=new Date(d+e,c,u),g=-5===e||6===e,y=d+e===f,b=!1,s&&(b=h.getFullYear()<s.getFullYear(),-5===e&&(p=b)),!b&&a&&(b=h.getFullYear()>a.getFullYear(),6===e&&(m=b)),!b&&r&&(b=!1===r.call(this.$element,h)),v+=this.createItem({text:d+e,view:b?"year disabled":y?"year picked":"year",muted:g,picked:y,disabled:b});this.$yearsPrev.toggleClass(o,p),this.$yearsNext.toggleClass(o,m),this.$yearsCurrent.toggleClass(o,!0).html(d+-5+n+" - "+(d+6)+n),this.$years.html(v)},fillMonths:function(){var e,i=this.options,o=i.disabledClass||"",n=i.monthsShort,r=t.isFunction(i.filter)&&i.filter,s=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getDate(),u=this.date,h=u.getFullYear(),f=u.getMonth(),p=!1,m=!1,b=!1,y=!1,g="";for(e=0;e<=11;e++)u=new Date(d,e,c),y=d===h&&e===f,b=!1,s&&(p=u.getFullYear()===s.getFullYear(),b=p&&u.getMonth()<s.getMonth()),!b&&a&&(m=u.getFullYear()===a.getFullYear(),b=m&&u.getMonth()>a.getMonth()),!b&&r&&(b=!1===r.call(this.$element,u)),g+=this.createItem({index:e,text:n[e],view:b?"month disabled":y?"month picked":"month",picked:y,disabled:b});this.$yearPrev.toggleClass(o,p),this.$yearNext.toggleClass(o,m),this.$yearCurrent.toggleClass(o,p&&m).html(d+i.yearSuffix||""),this.$months.html(g)},fillDays:function(){var e,i,o,n=this.options,r=n.disabledClass||"",s=n.yearSuffix||"",a=n.monthsShort,l=parseInt(n.weekStart,10)%7,c=t.isFunction(n.filter)&&n.filter,u=this.startDate,h=this.endDate,f=this.viewDate,p=f.getFullYear(),m=f.getMonth(),b=p,y=m,g=p,v=m,q=this.date,_=q.getFullYear(),w=q.getMonth(),k=q.getDate(),S=!1,$=!1,x=!1,D=!1,C=[],T=[],E=[];for(0===m?(b-=1,y=11):y-=1,e=d(b,y),q=new Date(p,m,1),o=q.getDay()-l,o<=0&&(o+=7),u&&(S=q.getTime()<=u.getTime()),i=e-(o-1);i<=e;i++)q=new Date(b,y,i),x=!1,u&&(x=q.getTime()<u.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),C.push(this.createItem({text:i,view:"day prev",muted:!0,disabled:x}));for(11===m?(g+=1,v=0):v+=1,e=d(p,m),o=42-(C.length+e),q=new Date(p,m,e),h&&($=q.getTime()>=h.getTime()),i=1;i<=o;i++)q=new Date(g,v,i),x=!1,h&&(x=q.getTime()>h.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),T.push(this.createItem({text:i,view:"day next",muted:!0,disabled:x}));for(i=1;i<=e;i++)q=new Date(p,m,i),D=p===_&&m===w&&i===k,x=!1,u&&(x=q.getTime()<u.getTime()),!x&&h&&(x=q.getTime()>h.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),E.push(this.createItem({text:i,view:x?"day disabled":D?"day picked":"day",picked:D,disabled:x}));this.$monthPrev.toggleClass(r,S),this.$monthNext.toggleClass(r,$),this.$monthCurrent.toggleClass(r,S&&$).html(n.yearFirst?p+s+" "+a[m]:a[m]+" "+p+s),this.$days.html(C.join("")+E.join(" ")+T.join(""))},click:function(e){var i,o,n,r,s,a,l=t(e.target),d=this.viewDate;if(e.stopPropagation(),e.preventDefault(),!l.hasClass("disabled"))switch(i=d.getFullYear(),o=d.getMonth(),n=d.getDate(),a=l.data("view")){case"years prev":case"years next":i="years prev"===a?i-10:i+10,s=l.text(),r=q.test(s),r&&(i=parseInt(s,10),this.date=new Date(i,o,k(n,28))),this.viewDate=new Date(i,o,k(n,28)),this.fillYears(),r&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":i="year prev"===a?i-1:i+1,this.viewDate=new Date(i,o,k(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":i=parseInt(l.text(),10),this.date=new Date(i,o,k(n,28)),this.viewDate=new Date(i,o,k(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":o="month prev"===a?o-1:"month next"===a?o+1:o,this.viewDate=new Date(i,o,k(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":o=t.inArray(l.text(),this.options.monthsShort),this.date=new Date(i,o,k(n,28)),this.viewDate=new Date(i,o,k(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":o="day prev"===a?o-1:"day next"===a?o+1:o,n=parseInt(l.text(),10),this.date=new Date(i,o,n),this.viewDate=new Date(i,o,n),this.fillDays(),"day"===a&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,o=this.$trigger[0];i!==f;){if(i===o){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=i(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger("show.datepicker").isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(w).on(y,t.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(h.on("resize.datepicker",this._place=a(this.place,this)),p.on(y,this._clickDoc=a(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger("hide.datepicker").isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(w).off(y,this.click),this.isInline||(h.off("resize.datepicker",this._place),p.off(y,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger("pick.datepicker",{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(e,i){var r=this.options,s=r.months;return t.isNumeric(e)?e=m(e):n(i)&&(i=e),!0===i&&(s=r.monthsShort),s[o(e)?e:this.date.getMonth()]},getDayName:function(e,i,r){var s=this.options,a=s.days;return t.isNumeric(e)?e=m(e):(n(r)&&(r=i),n(i)&&(i=e)),a=!0===r?s.daysMin:!0===i?s.daysShort:a,a[o(e)?e:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(e,o){var n=this.options.filter;if(r(e)||i(e)){if(e=this.parseDate(e),t.isFunction(n)&&!1===n.call(this.$element,e))return;this.date=e,this.viewDate=new Date(e),o||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(r(t)||i(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(r(t)||i(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,o,n,s,a,l,d=this.format,c=[];if(r(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(i(t)&&(c=t.match(v)||[]),t=new Date,o=t.getFullYear(),n=t.getDate(),s=t.getMonth(),e=d.parts.length,c.length===e)for(l=0;l<e;l++)switch(a=parseInt(c[l],10)||1,d.parts[l]){case"dd":case"d":n=a;break;case"mm":case"m":s=a-1;break;case"yy":o=2e3+a;break;case"yyyy":o=a}return new Date(o,s,n)},formatDate:function(t){var e,i,o,n,s,a=this.format,l="";if(r(t))for(l=a.source,i=t.getFullYear(),n={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i},n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m,e=a.parts.length,s=0;s<e;s++)o=a.parts[s],l=l.replace(o,n[o]);return l},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(b)}},u.LANGUAGES={},u.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},u.setDefaults=function(e){t.extend(u.DEFAULTS,t.isPlainObject(e)&&e)},u.other=t.fn.qorDatepicker,t.fn.qorDatepicker=function(e){var o,r=s(arguments,1);return this.each(function(){var n,s,a=t(this),l=a.data(b);if(!l){if(/destroy/.test(e))return;n=t.extend({},a.data(),t.isPlainObject(e)&&e),a.data(b,l=new u(this,n))}i(e)&&t.isFunction(s=l[e])&&(o=s.apply(l,r))}),n(o)?this:o},t.fn.qorDatepicker.Constructor=u,t.fn.qorDatepicker.languages=u.LANGUAGES,t.fn.qorDatepicker.setDefaults=u.setDefaults,t.fn.qorDatepicker.noConflict=function(){return t.fn.qorDatepicker=u.other,this}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.ajaxForm={},this.init()}var i=window.Mustache,o=window.QOR,n="click.qor.action",r='[data-ajax-form="true"][data-method]',s=".qor-page .qor-table-container";return e.prototype={constructor:e,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,".qor-action--bulk",this.renderBulkTable.bind(this)).on(n,".qor-action--exit-bulk",this.removeBulkTable.bind(this)),t(document).on(n,".qor-table--bulking tbody tr",this.handleBulkTableClick.bind(this)).on(n,r,this.clickAjaxButton.bind(this))},unbind:function(){this.$element.off(n),t(document).off(n,".qor-table--bulking tbody tr",this.handleBulkTableClick).off(n,r,this.clickAjaxButton)},initActions:function(){t(s).find("table").length||(t(".qor-action-bulk-buttons").hide(),t(".qor-page__header a.qor-action--button").hide())},collectFormData:function(){var e=t(".qor-table--bulking").find(".mdl-checkbox__input:checked"),i=[],o=[],n=void 0;return e.length&&e.each(function(){var e=t(this).closest("tr").data("primary-key");n={},e&&(i.push({name:"primary_values[]",value:e.toString()}),n["primary_values[]"]=e.toString(),o.push(n))}),this.ajaxForm.formData=i,this.ajaxForm.normalFormData=o,this.ajaxForm},actionSubmit:function(t){return this.submit(t),!1},handleBulkTableClick:function(e){var i=t(e.target).closest("tr"),o=i.find("td").first(),n=o.find(".mdl-js-checkbox");return n.toggleClass("is-checked"),i.toggleClass("is-selected"),o.find("input").prop("checked",n.hasClass("is-checked")),!1},adjustPageBodyStyle:function(e){var i=t(".qor-page > .qor-page__header"),o=t(".qor-page > .qor-page__body"),n=i.find(".qor-page-subnav__header").length?96:48;e?i.height()>n&&o.css("padding-top",i.height()):parseInt(o.css("padding-top"))>n&&o.css("padding-top","")},renderBulkTable:function(){var e=t("body");e.hasClass("qor-slideout-open")&&e.data("qor.slideout").hide(),t(".qor-table__inner-list").remove(),this.toggleBulkButtons(),this.enableTableMDL(),this.adjustPageBodyStyle(!0)},removeBulkTable:function(){this.toggleBulkButtons(),this.disableTableMDL(),this.adjustPageBodyStyle()},enableTableMDL:function(){t(s).find("table").removeAttr("data-upgraded").addClass("mdl-data-table--selectable").trigger("enable")},disableTableMDL:function(){t(s).find("table").removeClass("mdl-data-table--selectable").find("tr").removeClass("is-selected").find("td:first,th:first").remove()},toggleBulkButtons:function(){this.$element.find(".qor-action-forms").toggle(),t(".qor-action-bulk-buttons").find("button").toggleClass("hidden"),t(s).toggleClass("qor-table--bulking").find(".qor-table__actions").toggle(),t(".qor-page__header .qor-actions, .qor-page__header .qor-search-container").toggle()},clickAjaxButton:function(e){var i=t(e.target);return this.collectFormData(),this.ajaxForm.properties=i.data(),this.submit(i),!1},renderFlashMessage:function(t){var o=e.FLASHMESSAGETMPL;return i.parse(o),i.render(o,t)},submit:function(t){var e=this,i=this.ajaxForm||{},n=i.properties||t.data();if(n.fromIndex&&(!i.formData||!i.formData.length))return void o.qorConfirm(i.properties.errorNoItem);n.confirm?o.qorConfirm(n,function(o){o&&e.handleAjaxSubmit(i,t)}):this.handleAjaxSubmit(i,t)},handleAjaxSubmit:function(e,i){var n=this,r=this.$element,s=e.properties||i.data(),a=s.url,l=s.undoUrl,d=i.hasClass("is_undo"),c=i.closest(".qor-slideout").length,u=r.length&&!c;d&&(a=l),t.ajax(a,{method:s.method,data:e.formData,dataType:s.datatype||"json",beforeSend:function(){l?i.prop("disabled",!0):u&&n.switchButtons(r,1)},success:function(t){if(l)return r.trigger("undo.qor.action",[i,d,t]),d?i.removeClass("is_undo"):i.addClass("is_undo"),void i.prop("disabled",!1);window.location.reload()},error:function(t){200!=t.status&&(l?i.prop("disabled",!1):u&&n.switchButtons(r),o.handleAjaxError(t))},complete:function(d){var c=d.getResponseHeader("content-type"),u=d.getResponseHeader("Content-Disposition");if(u&&-1!==u.indexOf("attachment")){var h=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,f=h.exec(u),p={},m="";null!=f&&f[1]&&(m=f[1].replace(/['"]/g,"")),s.method&&(p=t.extend({},e.normalFormData,{_method:s.method})),o.qorAjaxHandleFile(a,c,m,p),l?i.prop("disabled",!1):n.switchButtons(r)}}})},switchButtons:function(t,e){var i=!!e;t.find(".qor-action-button").prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData("qor.action")}},e.DEFAULTS={},t.fn.qorSliderAfterShow.qorInsertActionData=function(e,i){var o=t(i).find('[data-toggle="qor-action-slideout"]'),n=o.find("form"),r=t(".qor-table--bulking").find(".mdl-checkbox__input:checked");o.length&&r.length&&r.each(function(){var e=t(this).closest("tr").data("primary-key");e&&n.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+e+'" />')})},e.plugin=function(i){return this.each(function(){var o=t(this),n=o.data("qor.action"),r=void 0;n||o.data("qor.action",n=new e(this,i)),"string"==typeof i&&t.isFunction(r=n[i])&&r.call(n)})},t(function(){var i={},o='[data-toggle="qor.action.bulk"]';t(o).length||t(document).on(n,r,function(i){return(new e).actionSubmit(t(i.target)),!1}),t(document).on("disable.qor.action",function(i){e.plugin.call(t(o,i.target),"destroy")}).on("enable.qor.action",function(n){e.plugin.call(t(o,n.target),i)}).triggerHandler("enable.qor.action")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i="qor.autoheight";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on("input",t.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(o){return this.each(function(){var n,r=t(this),s=r.data(i);if(!s){if(/destroy/.test(o))return;r.data(i,s=new e(this,o))}"string"==typeof o&&t.isFunction(n=s[o])&&n.apply(s)})},t(function(){var i="textarea.qor-js-autoheight";t(document).on("disable.qor.autoheight",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.autoheight",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.autoheight")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=i.exec(e);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function i(t,e,i){var o=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp("([?&])"+o+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return i.match(n)?e?i.replace(n,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(n,"$1"):i.replace(n,""):e?i+r+t+"="+e:void 0}function o(e,i){var o=[],n="href";return i&&(n="src"),e.each(function(){o.push(t(this).attr(n))}),c.uniq(o)}function n(e,i){var o=t.fn.qorSliderAfterShow;for(var n in o)o.hasOwnProperty(n)&&!o[n].isLoaded&&(o[n].isLoaded=!0,o[n].call(this,e,i))}function r(e,i,o){for(var r=0,s=0,a=e.length;s<a;s++){var l=document.createElement("script");l.onload=function(){r++,r===e.length&&t.isFunction(o)&&o(),i&&i.url&&i.response&&n(i.url,i.response)},l.src=e[s],document.body.appendChild(l)}}function s(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&s(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function a(e){var i=t("script"),n=o(e,!0),r=o(i,!0);return c.difference(n,r)}function l(e){var i=t("link"),n=o(e),r=o(i);return c.difference(n,r)}function d(e,i){this.$element=t(e),this.options=t.extend({},d.DEFAULTS,t.isPlainObject(i)&&i),this.disabled=!1,this.resourseData={},this.init()}var c=window._,u=window.FormData,h="qor.bottomsheets",f="click."+h,p="qor-bottomsheets-open";return d.prototype={constructor:d,init:function(){this.build(),this.bind()},build:function(){var e=void 0;this.$bottomsheets=e=t(d.TEMPLATE).appendTo("body"),this.$body=e.find(".qor-bottomsheets__body"),this.$title=e.find(".qor-bottomsheets__title"),this.$header=e.find(".qor-bottomsheets__header"),this.$bodyClass=t("body").prop("class"),this.filterURL="",this.searchParams=""},bind:function(){this.$bottomsheets.on("submit.qor.bottomsheets","form",this.submit.bind(this)).on(f,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(f,".qor-pagination a",this.pagination.bind(this)).on(f,".qor-bottomsheets__search-button",this.search.bind(this)).on("keyup.qor.bottomsheets",this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off("submit.qor.bottomsheets","form",this.submit.bind(this)).off(f,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(f,".qor-pagination a",this.pagination.bind(this)).off(f,".qor-bottomsheets__search-button",this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;i>=0;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var o;return o=this.constructloadURL(e,i),o&&this.reload(o),!1},selectorChanged:function(t,e,i){var o;return o=this.constructloadURL(e,i),o&&this.reload(o),!1},keyup:function(t){var e=this.$bottomsheets.find(".qor-bottomsheets__search-input");13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){
var e=this.$bottomsheets,i=e.data().url,o=t.trim(e.find(".qor-bottomsheets__search-input").val()),n=i+"?keyword="+o;this.reload(n)},pagination:function(e){var i=t(e.target),o=i.prop("href");return o&&this.reload(o),!1},reload:function(t){var e=this.$bottomsheets.find(".qor-page__body");this.addLoading(e),this.fetchPage(t)},fetchPage:function(e){var i=this.$bottomsheets,o=this;t.get(e,function(n){var r=t(n).find(".mdl-layout__content.qor-page"),s=r.find(".qor-page__header"),a=r.find(".qor-page__body");a.length?(i.find(".qor-page__body").html(a.html()),s.length&&(o.$body.find(".qor-page__header").html(s.html()).trigger("enable"),o.addHeaderClass()),i.trigger("reload.qor.bottomsheets")):o.reload(e)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,o){var n,r,s=this.filterURL,a=this.$bottomsheets.data().url;if(!s){if(!a)return;s=a}return n=new URL("http://www.getqor.com/"+t),r=e(o,n.search),s=this.filterURL=i(o,r,s)},addHeaderClass:function(){this.$body.find(".qor-page__header").hide(),this.$bottomsheets.find(".qor-page__header").children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(".qor-page__header").show()},addLoading:function(e){e.html("");var i=t(d.TEMPLATE_LOADING).appendTo(e);window.componentHandler.upgradeElement(i.children()[0])},loadExtraResource:function(t){var e=l(t.$links),i=a(t.$scripts);e.length&&s(e),i.length&&r(i,t)},loadMedialibraryJS:function(e){var i,o=e.filter("script"),n=/theme=media_library/g,r=this;o.each(function(){if(i=t(this).prop("src"),n.test(i)){var e=document.createElement("script");e.src=i,document.body.appendChild(e),r.scriptAdded=!0}})},submit:function(e){var i=e.target,o=t(i),n=this,r=o.prop("action"),s=void 0,a=o.closest(".qor-bottomsheets"),l=a.data(),d=l.ajaxType,c=o.find(":submit");if(!l.ingoreSubmit){o.data().normalSubmit||(t(document).trigger("bottomsheetBeforeSend.qor.bottomsheets"),e.preventDefault(),s=new u(i),t.ajax(r,{method:o.prop("method"),data:s,dataType:d||"html",processData:!1,contentType:!1,beforeSend:function(){c.prop("disabled",!0)},success:function(e,i,d){if(l.ajaxMute)return void a.remove();if(l.ajaxTakeover)return void l.$target.parent().trigger("ajaxSuccessed.qor.bottomsheets",[e,a]);var u=d.getResponseHeader("Content-Disposition");if(u&&-1!==u.indexOf("attachment")){var h=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,f=h.exec(u),p=d.getResponseHeader("Content-Type"),m="";return null!=f&&f[1]&&(m=f[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(r,p,m,s),void c.prop("disabled",!1)}t(".qor-error").remove();var b=o.data("returnUrl"),y=o.data("refreshUrl");return y?void(window.location.href=y):"refresh"==b?void n.refresh():(b&&"refresh"!=b?n.load(b):n.refresh(),void t(document).trigger("bottomsheetSubmitComplete.qor.bottomsheets"))},error:function(t){window.QOR.handleAjaxError(t)},complete:function(){c.prop("disabled",!1)}}))}},load:function(e,i,o){var n,r,s,a=this.options,l=i.actionData,c=this.resourseData,u=c.selectModal,h=c.ingoreSubmit,f=this.$bottomsheets,m=this.$header,b=this.$body;e&&(this.show(),this.addLoading(b),this.filterURL=e,b.removeClass("has-header has-hint"),i=t.isPlainObject(i)?i:{},n=i.method?i.method:"GET",r=i.datatype?i.datatype:"html",s=t.proxy(function(){t.ajax(e,{method:n,dataType:r,success:t.proxy(function(r){if("GET"===n){var s=t(r),p=void 0,y=void 0,g={$scripts:s.filter("script"),$links:s.filter("link"),url:e,response:r},v=u&&s.find(".qor-search-container").length,q=r.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(p=s.find(".mdl-layout__content.qor-page"),q&&(q=q.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),y=t(q).prop("class"),t("body").addClass(y)),!p.length)return;this.loadExtraResource(g),h&&p.find(".qor-page__header").remove(),p.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),b.html(p.html()),this.$title.html(s.find(a.title).html()),i.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'+i.selectNohint+'" data-select-modal="'+i.selectModal+'" data-select-listing-url="'+i.selectListingUrl+'">'+i.selectBacktolistTitle+"</button>"),u&&(b.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",c.selectId).data("loadInline",!0),"one"==u||i.selectNohint||void 0!==c.maxItem&&"1"==c.maxItem||b.addClass("has-hint"),"mediabox"!=u||this.scriptAdded||this.loadMedialibraryJS(s)),m.find(".qor-button--new").remove(),this.$title.after(b.find(".qor-button--new")),v&&(f.addClass("has-search"),m.find(".qor-bottomsheets__search").remove(),m.prepend(d.TEMPLATE_SEARCH)),l&&l.length&&this.bindActionData(l),c.bottomsheetClassname&&f.addClass(c.bottomsheetClassname),f.trigger("enable"),f.one("hidden.qor.bottomsheets",function(){t(this).trigger("disable")}),this.addHeaderClass(),f.data(i),o&&t.isFunction(o)&&o(this.$bottomsheets),f.trigger("bottomsheetLoaded.qor.bottomsheets",[e,r])}else i.returnUrl?this.load(i.returnUrl):this.refresh()},this),error:t.proxy(function(){this.$bottomsheets.remove(),t(".qor-bottomsheets").is(":visible")||t("body").removeClass(p);var e;e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(e)},this)})},this),s())},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),t("body").addClass(p)},hide:function(e){var i=t(e.target).closest(".qor-bottomsheets"),o=t(".qor-datepicker").not(".hidden");return o.length&&o.addClass("hidden"),i.qorSelectCore("destroy"),i.trigger("bottomsheetClosed.qor.bottomsheets").remove(),t(".qor-bottomsheets").is(":visible")||t("body").removeClass(p),!1},refresh:function(){this.$bottomsheets.remove(),t("body").removeClass(p),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(h)}},d.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},d.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',d.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',d.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search">\n            <input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" />\n            <button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n        </div>',d.TEMPLATE='<div class="qor-bottomsheets">\n            <div class="qor-bottomsheets__header">\n            <h3 class="qor-bottomsheets__title"></h3>\n            <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets">\n            <span class="material-icons">close</span>\n            </button>\n            </div>\n            <div class="qor-bottomsheets__body"></div>\n        </div>',d.plugin=function(e){return this.each(function(){var i,o=t(this),n=o.data(h);if(!n){if(/destroy/.test(e))return;o.data(h,n=new d(this,e))}"string"==typeof e&&t.isFunction(i=n[e])&&i.apply(n)})},t.fn.qorBottomSheets=d.plugin,d});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}return e.prototype={constructor:e,init:function(){var e=this.$element,i=e.data(),o=void 0,n={minimumResultsForSearch:8,dropdownParent:e.parent()};i.remoteData&&(n.ajax=t.fn.select2.ajaxCommonOptions(i),n.templateResult=function(i){var o=e.parents(".qor-field").find('[name="select2-result-template"]');return t.fn.select2.ajaxFormatResult(i,o)},n.templateSelection=function(i){if(i.loading)return i.text;var o=e.parents(".qor-field").find('[name="select2-selection-template"]');return t.fn.select2.ajaxFormatResult(i,o)}),e.on("select2:select",function(e){t(e.target).attr("chooser-selected","true")}).on("select2:unselect",function(e){t(e.target).attr("chooser-selected","")}),e.select2(n),this.resetSelect2Width(),o=window._.debounce(this.resetSelect2Width.bind(this),300),t(window).resize(o),e.val()&&e.attr("chooser-selected","true")},resetSelect2Width:function(){var t,e=this.$element.data().select2;e&&e.$container&&(t=e.$container,t.width(t.parent().width()))},destroy:function(){this.$element.select2("destroy").removeData("qor.chooser")}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,n=t(this),r=n.data("qor.chooser");if(!r){if(/destroy/.test(i))return;n.data("qor.chooser",r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on("disable.qor.chooser",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.chooser",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.chooser")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i={},o=void 0;if(t.isPlainObject(e))for(o in e)e.hasOwnProperty(o)&&(i[String(o).toLowerCase()]=e[o]);return i}function o(i,o){var n=String(o),r=n.toLowerCase(),s=n.toUpperCase(),a=e(n);if(t.isPlainObject(i))return i[r]||i[a]||i[s]}function n(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function r(t){return/.svg$/.test(t)}function s(e,i){this.$element=t(e),this.options=t.extend(!0,{},s.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var a=window.URL||window.webkitURL,l="qor.cropper",d="click."+l;return s.prototype={constructor:s,init:function(){var e=this.options,i=this.$element,o=i.closest(e.parent),n=void 0,s=void 0,a=void 0,l=this,d=void 0;o.length||(o=i.parent()),this.$parent=o,this.$output=o.find(e.output),this.$formCropInput=o.closest("form").find('input[name="QorResource.MediaOption"]:hidden'),this.$list=o.find(e.list),a=this.$output.data("fetchSizedata"),a?t.getJSON(a,function(t){d=JSON.parse(t.MediaOption),l.$output.val(JSON.stringify(t)),l.$formCropInput.val(JSON.stringify(t)),l.data=d||{},r(d.URL||d.Url)&&l.resetImage(),l.build(),l.bind()}):(s=t.trim(this.$output.val()),s&&(n=JSON.parse(s),r(n.URL||n.Url)&&this.resetImage()),this.data=n||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var e=this.$output.data(),i={},o=void 0;e&&(i={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},o=this.options.text),i.ok&&i.title&&i.cancel&&(o=i),this.wrap(),this.$modal=t(n(s.MODAL,o)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=void 0;e=t.find("img").not(".is-svg"),e.length?(t.find("li").append(s.TOGGLE),e.wrap(s.CANVAS),this.center(e)):t.find(".qor-cropper__toggle--crop").remove()},unwrap:function(){var e=this.$list;e.find(".qor-cropper__toggle").remove(),e.find(".qor-cropper__canvas").each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on("change.qor.cropper",t.proxy(this.read,this)),this.$list.on(d,t.proxy(this.click,this)),this.$modal.on("shown.qor.modal",t.proxy(this.start,this)).on("hidden.qor.modal",t.proxy(this.stop,this))},unbind:function(){this.$element.off("change.qor.cropper",this.read),this.$list.off(d,this.click),this.$modal.off("shown.qor.modal",this.start).off("hidden.qor.modal",this.stop)},click:function(e){var i=e.target,o=void 0,n=this.data,r=void 0;i!==this.$list[0]&&(o=t(i),o.closest(".qor-cropper__toggle--delete").length&&(n.Delete=!0,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n)),this.$list.hide(),r=t(s.ALERT),r.find(".qor-fieldset__undo").one(d,function(){r.remove(),this.$list.show(),delete n.Delete,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n))}.bind(this)),this.$parent.find(".qor-fieldset").append(r)),o.closest(".qor-cropper__toggle--crop").length&&(o=o.closest("li").find("img"),this.$target=o,this.$modal.qorModal("show")))},read:function(t){var e=t.target.files,i=void 0,o=this.$list,n=this.$parent.find(".qor-fieldset__alert");o.show(),delete this.data.Delete,n.length&&n.remove(),e&&e.length&&(i=e[0],/^image\//.test(i.type)&&a?(this.fileType=i.type,this.load(a.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):o.empty().html(s.FILE_LIST.replace("{{filename}}",i.name)))},load:function(e,i,n){var r=this.options,a=this,l=this.$list,d=t(s.LIST),c=this.data||{},u=this.fileType,h=void 0,f=void 0;i||(l.find("ul").remove(),l.html(d)),h=l.find("img"),this.wrap(),f=h.length,h.one("load",function(){if("image/svg+xml"===u)return l.find(".qor-cropper__toggle").remove(),!1;var e=t(this),i=this.naturalWidth,s=this.naturalHeight,d=e.data(),h=d.sizeResolution,p=d.sizeName,m={},b={},y=void 0,g=d.sizeResolutionWidth,v=d.sizeResolutionHeight;h?(g||v||(g=o(h,"width"),v=o(h,"height")),y=g/v,s*y>i?(g=i,v=g/y):(v=s,g=v*y),m={naturalWidth:i,naturalHeight:s},b={x:Math.round((i-g)/2),y:Math.round((s-v)/2),width:Math.round(g),height:Math.round(v)},a.preview(e,m,b),p&&(c.Crop=!0,c[r.key]||(c[r.key]={}),c[r.key][p]=b)):a.center(e),""===c.Crop&&delete c.Crop,""===c.CropOptions&&delete c.CropOptions,delete c.Delete,a.$output.val(JSON.stringify(c)),a.$formCropInput.val(JSON.stringify(c)),p&&c[r.key]&&Object.keys(c[r.key]).length>=f&&n&&t.isFunction(n)&&n()}).attr("src",e).data("originalUrl",e),l.show()},start:function(){var e=this.options,n=this.$modal,r=this.$target,s=r.data(),a=s.sizeName||"original",l=s.sizeResolution,c=t("<img src="+s.originalUrl+">"),u=this.data||{},h=this,f=NaN,p=s.sizeResolutionWidth,m=s.sizeResolutionHeight,b=void 0;l&&(p||m||(p=o(l,"width"),m=o(l,"height")),f=p/m),u[e.key]||(u[e.key]={}),n.trigger("enable.qor.material").find(".qor-cropper__wrapper").html(c),b=this.getList(f),b&&n.find(".qor-cropper__options").show().append(b),c.cropper({aspectRatio:f,data:i(u[e.key][a]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,autoCropArea:1,ready:function(){n.find(".qor-cropper__options-toggle").on(d,function(){n.find(".qor-cropper__options-input").prop("checked",t(this).prop("checked"))}).prop("checked",!0),n.find(".qor-cropper__save").one(d,function(){var i=c.cropper("getData",!0),o=c.cropper("getCroppedCanvas"),r=[],s=void 0;if(u.Crop=!0,u[e.key][a]=i,h.imageData=c.cropper("getImageData"),h.cropData=i,o)try{s=o.toDataURL()}catch(t){console.log(t),console.log("Please check image Cross-origin setting")}n.find(".qor-cropper__options input").each(function(){var e=t(this);e.prop("checked")&&r.push(e.attr("name"))}),h.output(s,r),n.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(".qor-cropper__wrapper > img").cropper("destroy").remove().end().find(".qor-cropper__options").hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var n=t(this).data(),r=n.sizeResolution,s=n.sizeName,a=n.sizeResolutionWidth,l=n.sizeResolutionHeight;r&&(a||l||(a=o(r,"width"),l=o(r,"height")),a/l===e&&i.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+s+'" checked> <span>'+s+"<small>("+a+"&times;"+l+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var o=this.$target;e?this.center(o.attr("src",e),!0):this.preview(o),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data)).trigger("change.qor.cropper"),this.$formCropInput.val(JSON.stringify(this.data))},preview:function(e,i,o){var n=e.parent(),r=n.parent(),s=r.width(),a=r.height(),l=i||this.imageData,d=t.extend({},o||this.cropData),c=d.width/d.height,u=s,h=void 0;0!=u&&0!=l.naturalWidth&&0!=l.naturalHeight&&(a*c<=s&&(u=a*c),h=d.width/u,e.css({maxWidth:l.naturalWidth/h,maxHeight:l.naturalHeight/h}),this.center(e))},center:function(e,i){e.each(function(){function e(){var t=r.height(),e=n.height(),i="auto";e<t&&(i=(t-e)/2),n.css("margin-top",i)}var o=t(this),n=o.parent(),r=n.parent();i&&n.add(o).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var o=this.cropData,n=this.data[this.options.key],r=this;this.$list.find("img").not(this.$target).each(function(){var s=t(this),a=s.data("sizeName");t.inArray(a,i)>-1&&(n[a]=t.extend({},o),e?r.center(s.attr("src",e),!0):r.preview(s))})},destroy:function(){r||(this.unbind(),this.unbuild()),this.$element.removeData(l)}},s.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},s.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',s.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',s.CANVAS='<div class="qor-cropper__canvas"></div>',s.LIST="<ul><li><img></li></ul>",s.FILE_LIST='<div class="qor-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="qor-cropper__toggle">\n                                    <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',s.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',s.plugin=function(e){return this.each(function(){var i=t(this),o=i.data(l),n=void 0,r=void 0;if(!o){if(!t.fn.cropper)return;if(/destroy/.test(e))return;n=t.extend(!0,{},i.data(),"object"===(void 0===e?"undefined":_typeof(e))&&e),i.data(l,o=new s(this,n))}"string"==typeof e&&t.isFunction(r=o[e])&&r.apply(o)})},t(function(){var e={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on("enable.qor.cropper",function(i){s.plugin.call(t(".qor-file__input",i.target),e)}).on("disable.qor.cropper",function(e){s.plugin.call(t(".qor-file__input",e.target),"destroy")}).triggerHandler("enable.qor.cropper")}),s});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function i(e,o){this.$element=t(e),this.options=t.extend(!0,{},i.DEFAULTS,t.isPlainObject(o)&&o),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}var o="qor.datepicker",n="click."+o;return i.prototype={init:function(){if(this.$element.closest("[data-picker-type]").find(this.pickerData.targetInput).is(":disabled"))return void this.$element.remove();this.bind()},bind:function(){this.$element.on(n,t.proxy(this.show,this))},unbind:function(){this.$element.off(n,this.show)},build:function(){var o=void 0,r=this.$element,s=this.pickerData,a=r.val()?new Date(r.val()):new Date,l={date:a,inline:!0},d=r.closest("[data-picker-type]"),c=d.find(s.targetInput);this.built||(this.$modal=o=t(e(i.TEMPLATE,this.options.text)).appendTo("body"),c.length&&(l.date=c.val()?new Date(c.val()):new Date),s.targetInput&&c.data("start-date")&&(l.startDate=new Date),o.find(".qor-datepicker__embedded").on("pick.qor.datepicker",t.proxy(this.change,this)).qorDatepicker(l).triggerHandler("pick.qor.datepicker"),o.find(".qor-datepicker__save").on(n,t.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(".qor-datepicker__embedded").off("pick.qor.datepicker",this.change).qorDatepicker("destroy").end().find(".qor-datepicker__save").off(n,this.pick).end().remove()},change:function(e){var i,o=this.$modal,n=t(e.target);this.date=i=n.qorDatepicker("getDate"),this.formatDate=n.qorDatepicker("getDate",!0),o.find(".qor-datepicker__picked-year").text(i.getFullYear()),o.find(".qor-datepicker__picked-date").text([n.qorDatepicker("getDayName",i.getDay(),!0)+",",String(n.qorDatepicker("getMonthName",i.getMonth(),!0)),i.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.pickerData.targetInput,e=this.$element,i=e.closest("[data-picker-type]"),o=t?i.find(t):e,n=i.data("picker-type"),r=this.formatDate;if("datetime"===n){var s=/^\d{4}-\d{1,2}-\d{1,2}/,a=o.val();s.test(a)?r=a.replace(s,r):r+=" 00:00"}o.val(r).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(o)}},i.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},i.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',i.plugin=function(e){return this.each(function(){var n,r,s=t(this),a=s.data(o);if(!a){if(!t.fn.qorDatepicker)return;if(/destroy/.test(e))return;n=t.extend(!0,{},s.data(),"object"===(void 0===e?"undefined":_typeof(e))&&e),s.data(o,a=new i(this,n))}"string"==typeof e&&t.isFunction(r=a[e])&&r.apply(a)})},t(function(){var e='[data-toggle="qor.datepicker"]';t(document).on("disable.qor.datepicker",function(o){i.plugin.call(t(e,o.target),"destroy")}).on("enable.qor.datepicker",function(o){i.plugin.call(t(e,o.target))}).triggerHandler("enable.qor.datepicker")}),i});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){var e=function e(i,o){var n=!1;return this instanceof jQuery?(o=i,i=this):i instanceof jQuery||(i=t(i)),i.each(function(i,r){var s=t(r);if(s.is("form")){if(s.hasClass("ignore-dirtyform"))return!1;if(n=e(s.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),o))return!1}else if(s.is(":checkbox")||s.is(":radio")){if(s.hasClass("ignore-dirtyform"))return!1;if(r.checked!=r.defaultChecked)return n=!0,!1}else if(s.is("input")||s.is("textarea")){if(s.hasClass("ignore-dirtyform"))return!1;if(r.value!=r.defaultValue)return n=!0,!1}else if(s.is("select")){if(s.hasClass("ignore-dirtyform"))return!1;for(var a,l=0,d=r.options.length,c=0;c<d;c++)a=r.options[c],n=n||a.selected!=a.defaultSelected,a.defaultSelected&&(l=c);if(n&&!r.multiple&&(n=l!=r.selectedIndex),n)return!1}}),n};t.fn.extend({dirtyForm:e}),t(function(){t(document).on("submit","form",function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null}),t(document).on("change","form",function(){t(this).dirtyForm()?(t.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(t.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=window.location,o=t(document),n="click.qor.filter";return e.prototype={constructor:e,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(n,t.trigger,this.show.bind(this)).on(n,t.label,this.setFilterTime.bind(this)).on(n,t.clear,this.clear.bind(this)).on(n,t.button,this.search.bind(this)),o.on(n,this.close)},unbind:function(){this.$element.off(n)},initActionTemplate:function(){var e=this.getUrlParameter("schedule_start_at"),i=this.getUrlParameter("schedule_end_at"),o=t(this.options.trigger);(e||i)&&(this.$timeStart.val(e),this.$timeEnd.val(i),i=i?" - "+i:"",o.addClass("active clearable").find(".qor-selector-label").html(e+i),o.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(".qor-filter__dropdown").toggle()},close:function(e){var i=t(e.target),o=t(".qor-filter__dropdown"),n=o.is(":visible"),r=i.closest(".qor-filter__dropdown").length,s=i.closest(".qor-filter-toggle").length,a=i.closest(".qor-modal").length,l=i.closest(".ui-timepicker-wrapper").length;n&&(r||s||a||l)||o.hide()},setFilterTime:function(e){var i=t(e.target),o=i.data(),n=o.filterRange,r=void 0,s=void 0,a=void 0,l=void 0;if(!n)return!1;if(t(this.options.label).removeClass("is-selected"),i.addClass("is-selected"),"events"==n)return this.$timeStart.val(o.scheduleStartAt||""),this.$timeEnd.val(o.scheduleEndAt||""),this.$searchButton.click(),!1;switch(n){case"today":a=l=new Date;break;case"week":a=this.startWeekDate,l=this.endWeekDate;break;case"month":a=this.startMonthDate,l=this.endMonthDate}if(!a||!l)return!1;r=this.getTime(a)+" 00:00",s=this.getTime(l)+" 23:59",this.$timeStart.val(r),this.$timeEnd.val(s),this.$searchButton.click()},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var e=t(this.options.trigger),i=e.find(".qor-selector-label");return e.removeClass("active clearable"),i.html(i.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=i.search,o=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+o+"=([^&#]*)"),r=n.exec(e);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,o){var n=o||i.href,r=n.match(/#\S*$/)||"",s=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp("([?&])"+s+"=.*?(&|$)","i"),l=-1!==n.indexOf("?")?"&":"?";return r&&(r=r[0],n=n.replace(r,"")),n.match(a)?n=e?n.replace(a,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?n.replace(a,"$1"):n.replace(a,""):e&&(n=n+l+t+"="+e),n+r},search:function(){var e=this.$searchParam,o=i.href,n=this;e.length&&(e.each(function(){var e=t(this),i=e.data().searchParam,r=e.val();o=n.updateQueryStringParameter(i,r,o)}),this.$element.closest(".qor-bottomsheets").length?t(".qor-bottomsheets").trigger("filterChanged.qor.filter",[o,"qor.filter.time"]):i.href=o)},destroy:function(){this.unbind(),this.$element.removeData("qor.filter")}},e.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},e.plugin=function(i){return this.each(function(){var o,n=t(this),r=n.data("qor.filter");if(!r){if(/destroy/.test(i))return;n.data("qor.filter",r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){var i='[data-toggle="qor.filter.time"]',o={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};t(document).on("disable.qor.filter",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.filter",function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler("enable.qor.filter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}function i(e,i){var r,s=decodeURI(n.search);return t.isArray(e)&&(r=o(s),t.each(e,function(e,o){e=t.inArray(o,r),-1===e?r.push(o):i&&r.splice(e,1)}),s="?"+r.join("&")),s}function o(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.replace(/\+/g," ").split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,o=[];if(e=e.split("="),
!/page/.test(e[0]))return i=e[1],o.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)))&&o.push(i),o.join("=")}))),i}var n=window.location,r="qor.filter";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on("click.qor.filter",e.label,t.proxy(this.toggle,this)).on("change.qor.filter",e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off("click.qor.filter",this.toggle).off("change.qor.filter",this.toggle)},toggle:function(e){var r,s,a,l,d,c,u,h,f=t(e.currentTarget),p=[];f.is("select")?(r=o(decodeURI(n.search)),h=l=f.attr("name"),d=f.val(),s=[l],d&&s.push(d),s=s.join("="),d&&p.push(s),f.children().each(function(){var e=t(this),i=[l],o=t.trim(e.prop("value"));if(o&&i.push(o),i=i.join("="),(c=t.inArray(i,r))>-1)return u=i,!1}),u?(p.push(u),a=i(p,!0)):a=i(p)):f.is("a")&&(e.preventDefault(),h=f.data().paramName,p=o(f.attr("href")),a=f.hasClass("is-active")?i(p,!0):i(p)),this.$element.closest(".qor-bottomsheets").length?t(".qor-bottomsheets").trigger("filterChanged.qor.filter",[a,h]):n.search=a},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var o,n=t(this),s=n.data(r);if(!s){if(/destroy/.test(i))return;n.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(o=s[i])&&o.apply(s)})},t(function(){var i='[data-toggle="qor.filter"]',o={label:"a",group:"select"};t(document).on("disable.qor.filter",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.filter",function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler("enable.qor.filter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=t(window);return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;this.isNeedBuild()||(this.$thead=i.find("thead"),this.$tbody=i.find("tbody"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.resize(),this.bind())},bind:function(){this.$content.on("scroll.qor.fixer",this.toggle.bind(this)),i.on("resize.qor.fixer",this.resize.bind(this))},unbind:function(){this.$content.off("scroll.qor.fixer",this.toggle).off("resize.qor.fixer",this.resize)},isNeedBuild:function(){var e=this.$element;return!!(t(".qor-page__body .qor-js-table").length>1||t(".qor-global-search--container").length>0||e.hasClass("qor-table--medialibrary")||e.is(":hidden")||e.find("tbody > tr:visible").length<=1)},build:function(){var e=[];this.$tbody.find("> tr:first").children().each(function(){e.push(t(this).outerWidth())}),this.$thead.find(">tr").children().each(function(i){t(this).outerWidth(e[i])})},toggle:function(){if(this.$content.length){var e=this.$element,i=this.$thead,o=this.$content.scrollTop(),n=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,r=t(".qor-page__header").outerHeight(),s=this.$content.offset().top+t(".qor-page__header").height();o>n-r?(i.css({top:s}),e.addClass("qor-table-fixed-header")):e.removeClass("qor-table-fixed-header")}},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.$element.removeData("qor.fixer"))}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(i){return this.each(function(){var o,n=t(this),r=n.data("qor.fixer");r||n.data("qor.fixer",r=new e(this,i)),"string"==typeof i&&t.isFunction(o=r[i])&&o.call(r)})},t(function(){var i={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on("disable.qor.fixer",function(i){e.plugin.call(t(".qor-js-table",i.target),"destroy")}).on("enable.qor.fixer",function(o){e.plugin.call(t(".qor-js-table",o.target),i)}).triggerHandler("enable.qor.fixer")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}function i(e,i){var o=void 0,n=i[e[0].slice(1)];if(e.length>1)for(var r=1;r<e.length;r++)o=e[r].slice(1),n=t.isArray(n)?n[0][o]:n[o];return n}var o="qor.inlineEdit",n="click."+o;return e.prototype={constructor:e,init:function(){var t=this.$element,e=t.data("button-save"),i=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="qor-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__cancel" type="button">'+i+'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__save" type="button">'+e+"</button>\n                                      </div>",this.bind()},bind:function(){this.$element.on("mouseenter.qor.inlineEdit",".qor-field__show",this.showEditButton).on("mouseleave.qor.inlineEdit",".qor-field__show",this.hideEditButton).on(n,".qor-inlineedit__cancel",this.hideEdit).on(n,".qor-inlineedit__save",this.saveEdit).on(n,".qor-inlineedit__edit",this.showEdit.bind(this))},unbind:function(){this.$element.off("mouseenter.qor.inlineEdit").off("mouseleave.qor.inlineEdit").off(n)},showEditButton:function(i){var o=t(e.TEMPLATE_EDIT);if(t(i.target).closest(".qor-field").find("input:disabled, textarea:disabled,select:disabled").length)return!1;o.appendTo(t(this))},hideEditButton:function(){t(".qor-inlineedit__edit").remove()},showEdit:function(e){var i=t(e.target).closest(".qor-inlineedit__edit").hide().closest(".qor-field").addClass("qor-inlineedit__field");t(this.TEMPLATE_SAVE).appendTo(i)},hideEdit:function(){t(this).closest(".qor-field").removeClass("qor-inlineedit__field").find(".qor-inlineedit__buttons").remove()},saveEdit:function(){var e=t(this),o=e.closest(".qor-field"),n=e.closest("form"),r=o.closest(".qor-fieldset").find('input.qor-hidden__primary_key[type="hidden"]'),s=o.find('input[name*="QorResource"],textarea[name*="QorResource"],select[name*="QorResource"]'),a=s.length&&s.prop("name").match(/\.\w+/g),l=s.serialize();r.length&&(l=l+"&"+r.serialize()),a.length&&t.ajax(n.prop("action"),{method:n.prop("method"),data:l,dataType:"json",beforeSend:function(){e.prop("disabled",!0)},success:function(t){var n=i(a,t),r=o.removeClass("qor-inlineedit__field").find(".qor-field__show"),s=r.find(".qor-field__show-inner");s.length?s.html(n):r.html(n),o.find(".qor-inlineedit__buttons").remove(),e.prop("disabled",!1)},error:function(t){window.QOR.handleAjaxError(t),e.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={},e.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored qor-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',e.plugin=function(i){return this.each(function(){var n,r=t(this),s=r.data(o);s||r.data(o,s=new e(this,i)),"string"==typeof i&&t.isFunction(n=s[i])&&n.call(s)})},t(function(){var i='[data-toggle="qor.inlineEdit"]',o={};t(document).on("disable.qor.inlineEdit",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.inlineEdit",function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler("enable.qor.inlineEdit")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){o&&(t(e).is(n)?o.upgradeElements(e):o.upgradeElements(t(n,e).toArray()))}function i(e){o&&(t(e).is(n)?o.downgradeElements(e):o.downgradeElements(t(n,e).toArray()))}var o=window.componentHandler,n='[class*="mdl-js"],[class*="mdl-tooltip"]';t(function(){t(document).on("enable.qor.material",function(t){e(t.target)}).on("disable.qor.material",function(t){i(t.target)}).on("update.qor.material",function(t){i(t.target),e(t.target)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),o="qor.modal";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on("click.qor.modal",t.proxy(this.click,this)),this.options.keyboard&&i.on("keyup.qor.modal",t.proxy(this.keyup,this))},unbind:function(){this.$element.off("click.qor.modal",this.click),this.options.keyboard&&i.off("keyup.qor.modal",this.keyup)},click:function(e){var i=this.$element[0],o=e.target;if(o===i&&this.options.backdrop)return void this.hide();for(;o!==i;){if("modal"===t(o).data("dismiss")){this.hide();break}o=o.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var o,n=this.$element;if(!this.transitioning&&!n.hasClass("in")&&(o=t.Event("show.qor.modal"),n.trigger(o),!o.isDefaultPrevented())){if(i.find("body").addClass("qor-modal-open"),n.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return n.addClass("in"),void this.shown();n.one("transitionend",t.proxy(this.shown,this)),n.addClass("in")}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr("aria-hidden",!1).trigger("shown.qor.modal").focus()},hide:function(e){var o,n=this.$element;if(!this.transitioning&&n.hasClass("in")&&(o=t.Event("hide.qor.modal"),n.trigger(o),!o.isDefaultPrevented())){if(i.find("body").removeClass("qor-modal-open"),this.transitioning=!0,e||!this.fadable)return n.removeClass("in"),void this.hidden();n.one("transitionend",t.proxy(this.hidden,this)),n.removeClass("in")}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr("aria-hidden",!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass("in")?this.hide():this.show()},destroy:function(){this.$element.removeData(o)}},e.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},e.plugin=function(i){return this.each(function(){var n,r=t(this),s=r.data(o);if(!s){if(/destroy/.test(i))return;r.data(o,s=new e(this,i))}"string"==typeof i&&t.isFunction(n=s[i])&&n.apply(s)})},t.fn.qorModal=e.plugin,t(function(){t(document).on("click.qor.modal",'[data-toggle="qor.modal"]',function(){var i=t(this),n=i.data(),r=t(n.target||i.attr("href"));e.plugin.call(r,r.data(o)?"toggle":n)}).on("disable.qor.modal",function(i){e.plugin.call(t(".qor-modal",i.target),"destroy")}).on("enable.qor.modal",function(i){e.plugin.call(t(".qor-modal",i.target))})}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i="qor.tabbar.radio";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on("click.qor.tabbar.radio","[data-tab-target]",this.switchTab.bind(this))},unbind:function(){this.$element.off("click.qor.tabbar.radio","[data-tab-target]",this.switchTab)},switchTab:function(e){var i=t(e.target),o=this.$element,n=o.find("[data-tab-target]"),r=o.find("[data-tab-source]"),s=i.data(),a=s.tabTarget;i.hasClass("is-active")||(n.removeClass("is-active"),i.addClass("is-active"),r.hide().filter('[data-tab-source="'+a+'"]').show(),o.trigger("switched.qor.tabbar.radio",[o,a]))},destroy:function(){this.unbind()}},e.DEFAULTS={},e.plugin=function(o){return this.each(function(){var n,r=t(this),s=r.data(i);if(!s){if(/destroy/.test(o))return;r.data(i,s=new e(this,o))}"string"==typeof o&&t.isFunction(n=s[o])&&n.apply(s)})},t(function(){var i='[data-toggle="qor.tab.radio"]';t(document).on("disable.qor.tabbar.radio",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.tabbar.radio",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.tabbar.radio")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function o(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function n(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[o(i)]=e[i]);return n}function r(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function s(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function a(t,e){var i=t.find(".redactor-toolbar"),o=t.offset().top,n=t.height(),r={position:"relative",top:"auto",width:"auto",boxShadow:"none"},s={position:"fixed",boxShadow:"0 2px 4px rgba(0,0,0,.1)",top:e,width:t.width()};"relative"===i.css("position")&&(n=t.height()-50),o<e?n-50-e<Math.abs(o)?i.css(r):i.css(s):i.css(r)}function l(e,i){this.$element=t(e),this.options=t.extend(!0,{},l.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var d="qor.redactor",c="click."+d,u="keyup."+d;return l.prototype={constructor:l,init:function(){var e=this.options,i=this.$element,o=i.closest(e.parent);o.length||(o=i.parent()),this.$parent=o,this.$button=t(l.BUTTON),this.$modal=t(r(l.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){this.$element.on("addCrop.qor.redactor",t.proxy(this.addButton,this)).on("removeCrop.qor.redactor",t.proxy(this.removeButton,this))},unbind:function(){this.$element.off("addCrop.qor.redactor").off("removeCrop.qor.redactor").off("scroll.qor.redactor")},addButton:function(e,i){var o=t(i);this.$button.css("left",t(i).width()/2).prependTo(o.parent()).find(".qor-cropper__toggle--redactor").one(c,t.proxy(this.crop,this,o))},removeButton:function(){this.$button.find(".qor-cropper__toggle--redactor").off(c),this.$button.detach()},crop:function(o){var r=this.options,s=o.attr("src"),a=s,l=void 0,d=this.$modal;t.isFunction(r.replace)&&(a=r.replace(a)),l=t("<img src='"+a+"'>"),d.one("shown.qor.modal",function(){l.cropper({data:i(o.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,ready:function(){d.find(".qor-cropper__save").one(c,function(){var i=l.cropper("getData",!0);t.ajax(r.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:s,CropOptions:{original:n(i)},Crop:!0}),dataType:"json",success:function(n){t.isPlainObject(n)&&n.url&&(o.attr("src",n.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(r.complete)&&r.complete(),d.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){l.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(d)}},l.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},l.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',l.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',l.plugin=function(e){return this.each(function(){var i=t(this),o=i.data(d),n=void 0,r=void 0;if(o)/destroy/.test(e)&&i.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;i.data(d,o={});var h=["html","format","bold","italic","deleted","lists","image","file","link","table"];n={imageUpload:i.data("uploadUrl"),fileUpload:i.data("uploadUrl"),imageResizable:!0,imagePosition:!0,toolbarFixed:!1,buttons:h,callbacks:{init:function(){var e=void 0,n=this.core.box(),r=t(".qor-slideout").is(":visible"),s=void 0,c=64;h.forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),r?(s=".qor-slideout__body",c=t(".qor-slideout__header").height()):(s=".qor-layout main.qor-page",c+=t(s).find(".qor-page__header").height()),t(s).on("scroll.qor.redactor",function(){a(n,c)}),i.data("cropUrl")&&i.data(d,o=new l(i,{remote:i.data("cropUrl"),text:i.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},imageUpload:function(e,i){var o=t(e);i.filelink&&o.prop("src",i.filelink)},click:function(e){var i=t(this.selection.parent());i.is(".redactor-layer")&&(i=t(this.selection.current())),this.selection.$currentTag=i,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=t(e.target))},modalOpened:function(e,i){var o=this;"link"==e&&(t(i).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=t("#redactor-link-url-text").val(),this.link.description=t("#redactor-link-title").val(),t("#redactor-link-title").off(u),t("#redactor-link-url-text").off(u),t("#redactor-modal-button-cancel").off(c),t("#redactor-modal-button-cancel").on(c,function(){o.link.clickCancel=!0}),t("#redactor-link-title").on(u,function(){o.link.valueChanged=!0,o.link.description=s(t(this).val())}),t("#redactor-link-url-text").on(u,function(){o.link.valueChanged=!0,o.link.linkUrlText=s(t(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(e){var i=t(e),o=this.link.description;i.prop("title",o||i.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(e,i){t(e).prop("href",i.filelink).html(i.filename)}}},t.extend(n,i.data("redactorSettings")),i.redactor(n)}"string"==typeof e&&t.isFunction(r=o[e])&&r.apply(o)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on("disable.qor.redactor",function(i){l.plugin.call(t(e,i.target),"destroy")}).on("enable.qor.redactor",function(i){l.plugin.call(t(e,i.target))}).triggerHandler("enable.qor.redactor")}),l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.index=0,this.init()}var i=window._,o="qor.replicator",n="click."+o,r="selectcoreBeforeSend.qor.selectcore.replicator bottomsheetBeforeSend.qor.bottomsheets.replicator";return e.prototype={constructor:e,init:function(){var e=this,i=this.$element,o=i.find("> .qor-field__block > .qor-fieldset--new"),n=void 0;this.singlePage=!(i.closest(".qor-slideout").length&&i.closest(".qor-bottomsheets").length),this.maxitems=i.data("maxItem"),this.isSortable=i.hasClass("qor-fieldset-sortable"),o.length&&!i.closest(".qor-fieldset--new").length&&(o.trigger("disable"),this.isMultipleTemplate=i.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],o.each(function(i,o){(n=t(o).data("fieldsetName"))&&(e.template[n]=t(o).prop("outerHTML"),e.fieldsetName.push(n))}),this.parseMultiple()):(this.template=o.prop("outerHTML"),this.parse()),o.hide(),this.bind(),this.resetButton(),this.resetPositionButton())},resetPositionButton:function(){var t=this.$element.find("> .qor-sortable__button");this.isSortable&&(this.getCurrentItems()>1?t.show():t.hide())},getCurrentItems:function(){return this.$element.find("> .qor-field__block > .qor-fieldset").not(".qor-fieldset--new,.is-deleted").length},toggleButton:function(t){var e=this.$element.find("> .qor-field__block > .qor-fieldset__add");t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parse:function(){var t=void 0;this.template&&(t=this.initTemplate(this.template),this.template=t.template,this.index=t.index)},parseMultiple:function(){for(var t=void 0,e=void 0,o=this.fieldsetName,n=0,r=o.length;n<r;n++)e=o[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=i.max(this.index)},initTemplate:function(t){var e=void 0,i=this.$element.parents(".qor-fieldset-container").length;return t=t.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,o,n){return n=n.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,r,s){if(t===n){if("name"!==o||e||(e=s),i){for(var a="",l=t.split(/\[\d+\]/),d=t.match(/\[\d+\]/g),c=0;c<l.length;c++){var u="";c===i?u="[{{index}}]":c<d.length&&(u=d[c]),a+=l[c]+u}return a}return t.replace(/\[\d+\]/,"[{{index}}]")}}),o+'="'+n+'"'}),{template:t,index:parseFloat(e)+5}},bind:function(){var e=this.options;this.$element.on(n,e.addClass,t.proxy(this.add,this)).on(n,e.delClass,t.proxy(this.del,this)),this.singlePage&&t(document).on("submit.qor.replicator",".mdl-layout__container form",this.clearFieldData),t(document).on("slideoutBeforeSend.qor.slideout.replicator",".qor-slideout",this.clearFieldDataInSlideout).on(r,this.clearFieldDataInBottomsheet)},unbind:function(){this.$element.off(n),this.singlePage&&t(document).off("submit.qor.replicator",".mdl-layout__container form",this.clearFieldData),t(document).off("slideoutBeforeSend.qor.slideout.replicator",".qor-slideout",this.clearFieldDataInSlideout).off(r,this.clearFieldDataInBottomsheet)},clearFieldData:function(){t(".qor-fieldset--new").remove()},clearFieldDataInSlideout:function(){t(".qor-slideout .qor-fieldset--new").remove()},clearFieldDataInBottomsheet:function(){t(".qor-bottomsheets .qor-fieldset--new").remove()},add:function(e,i,o){var n=this.options,r=void 0,s=void 0,a=t(e.target).closest(n.addClass);if(this.maxitems<=this.getCurrentItems())return!1;if(this.isMultipleTemplate){var l=a.data("template"),d=a.closest(this.$element),c=d.children(n.childrenClass),u=a.closest(n.childrenClass).children("fieldset");s=this.template[l],r=t(s.replace(/\{\{index\}\}/g,this.multipleIndex));for(var h in a.data())if(h.match(/^sync/)){var f=h.replace(/^sync/,"");r.find("input[name*='."+f+"']").val(a.data(h))}u.length?u.last().after(r.show()):c.prepend(r.show()),r.data("itemIndex",this.multipleIndex).removeClass("qor-fieldset--new"),this.multipleIndex++}else o?i&&i.length&&(this.addMultiple(i),t(document).trigger("addedMultipleDone.qor.replicator")):(r=this.addSingle(),a.before(r.show()),this.index++);o||(r.trigger("enable"),t(document).trigger("added.qor.replicator",[r]),e.stopPropagation()),this.resetPositionButton(),this.resetButton()},addMultiple:function(e){for(var i=void 0,o=0,n=e.length;o<n;o++)i=this.addSingle(),this.index++,t(document).trigger("addedMultiple.qor.replicator",[i,e[o]])},addSingle:function(){var e=void 0,i=this.$element;if(e=t(this.template.replace(/\{\{index\}\}/g,this.index)),this.isSortable){var o=i.find("> .qor-field__block > .qor-sortable__item").not(".qor-fieldset--new").length;e.attr("order-index",o).css("order",o)}return e.data("itemIndex",this.index).removeClass("qor-fieldset--new"),e},del:function(e){var i=this.options,o=t(e.target).closest(i.itemClass),r=void 0;o.addClass("is-deleted").children(":visible").addClass("hidden").hide(),r=t(i.alertTemplate.replace("{{name}}",this.parseName(o))),r.find(i.undoClass).one(n,function(){if(this.maxitems<=this.getCurrentItems())return window.QOR.qorConfirm(this.$element.data("maxItemHint")),!1;o.find("> .qor-fieldset__alert").remove(),o.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),this.resetButton(),this.resetPositionButton()}.bind(this)),this.resetButton(),this.resetPositionButton(),o.append(r)},parseName:function(t){var e=t.find("input[name]").attr("name")||t.find("textarea[name]").attr("name");if(e)return e.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},e.plugin=function(i){return this.each(function(){var n=t(this),r=n.data(o),s=void 0;r||n.data(o,r=new e(this,i)),"string"==typeof i&&t.isFunction(s=r[i])&&s.call(r)})},t(function(){var i={};t(document).on("disable.qor.replicator",function(i){e.plugin.call(t(".qor-fieldset-container",i.target),"destroy")}).on("enable.qor.replicator",function(o){e.plugin.call(t(".qor-fieldset-container",o.target),i)}).triggerHandler("enable.qor.replicator")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=window.location,o=window.componentHandler,n=window.history,r="qor.globalSearch",s=".qor-global-search--results";return e.prototype={constructor:e,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on("click.qor.globalSearch",t.proxy(this.click,this))},unbind:function(){this.$element.off("click.qor.globalSearch",this.check)},initTab:function(){var e,o=i.search;/resource_name/.test(o)&&(e=o.match(/resource_name=\w+/g).toString().split("=")[1],t(".qor-global-search--resource").removeClass("is-active"),t('[data-resource="'+e+'"]').addClass("is-active"))},click:function(e){var o=t(e.target),r=o.data();if(o.is(".qor-global-search--resource")){var s,a=i.href.replace(/#/g,""),l=r.resource,d=/resource_name/.test(a),c=/keyword/.test(a),u="resource_name="+l,h=c?"&":"?keyword=&";s=l?d?a.replace(/resource_name=\w+/g,u):a+h+u:a.replace(/&resource_name=\w+/g,""),n.pushState?this.fetchSearch(s,o):i.href=s}},fetchSearch:function(e,i){var r=document.title;t.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){t(".mdl-spinner").remove(),t(s).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),o.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(a){var l=t(a).find(s).html();t(".qor-global-search--resource").removeClass("is-active"),i.addClass("is-active"),n.pushState({Page:e,Title:r},r,e),t(".mdl-spinner").remove(),t(s).removeClass("loading").html(l),o.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(e,i,o){t(s).find(".qor-section").show(),t(".mdl-spinner").remove(),window.alert([i,o].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,n=t(this),s=n.data(r);s||n.data(r,s=new e(this,i)),"string"==typeof i&&t.isFunction(o=s[i])&&o.call(s)})},t(function(){var i='[data-toggle="qor.global.search"]',o={};t(document).on("disable.qor.globalSearch",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.globalSearch",function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler("enable.qor.globalSearch")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=window.FormData,o=window.QOR,n="qor.selectcore";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on("click.qor.selectcore","table tr",this.processingData.bind(this)).on("submit.qor.selectcore","form",this.submit.bind(this))},unbind:function(){this.$element.off("click.qor.selectcore","table tr").off("submit.qor.selectcore","form")},processingData:function(e){
var i=t(e.target).closest("tr"),o={},n=void 0,r=this.options,s=r.onSelect,a=r.loading;return o=t.extend({},o,i.data()),o.$clickElement=i,n=o.mediaLibraryUrl||o.url,a&&t.isFunction(a)&&a(i.closest(".qor-bottomsheets")),n?t.getJSON(n,function(i){i.MediaOption&&(i.MediaOption=JSON.parse(i.MediaOption)),o=t.extend({},i,o),s&&t.isFunction(s)&&(s(o,e),t(document).trigger("afterSelected.qor.selectcore"))}):s&&t.isFunction(s)&&(s(o,e),t(document).trigger("afterSelected.qor.selectcore")),!1},submit:function(e){var n=e.target,r=t(n),s=this,a=r.find(":submit"),l=void 0,d=t(o.$formLoading),c=this.options.onSubmit;t(document).trigger("selectcoreBeforeSend.qor.selectcore"),r.find(".qor-fieldset--new").remove(),i&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new i(n),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){t(".qor-submit-loading").remove(),d.appendTo(a.prop("disabled",!0).closest(".qor-form__actions")).trigger("enable.qor.material")},success:function(i){i.MediaOption&&(i.MediaOption=JSON.parse(i.MediaOption)),l=i,l.primaryKey=l.ID,t(".qor-error").remove(),c&&t.isFunction(c)?(c(l,e),t(document).trigger("afterSubmitted.qor.selectcore")):s.refresh()},error:function(t){o.handleAjaxError(t)},complete:function(){a.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},e.plugin=function(i){return this.each(function(){var o=t(this),r=o.data(n),s=void 0;if(!r){if(/destroy/.test(i))return;o.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(s=r[i])&&s.apply(r)})},t.fn.qorSelectCore=e.plugin,e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=t("body"),o=t(document),n=window.Mustache,r="qor.selectone",s="click."+r,a="qor-selected-many__deleted",l=".qor-field__selectmany",d="qor-bottomsheets__select-many";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){o.on("reload.qor.bottomsheets","."+d,this.reloadData.bind(this)),this.$element.on(s,".qor-selected-many__remove",this.clearSelect.bind(this)).on(s,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(s,".qor-selected-many__undo",this.undoDelete.bind(this))},unbind:function(){o.off(s,'[data-select-modal="many"]').off("reload.qor.bottomsheets","."+d),this.$element.off(s,".qor-selected-many__remove").off(s,".qor-selected-many__undo")},clearSelect:function(e){var i=t(e.target),o=i.closest(l);return i.closest("[data-primary-key]").addClass(a),this.updateSelectInputData(o),!1},undoDelete:function(e){var i=t(e.target),o=i.closest(l);return i.closest("[data-primary-key]").removeClass(a),this.updateSelectInputData(o),!1},openBottomSheets:function(e){var o=t(e.target),n=o.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=n,this.$selector=n.selectId?t(n.selectId):o.closest(l).find("select"),this.$selectFeild=this.$selector.closest(l).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=t('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=t('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=t('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=t('[name="select-many-template"]').html(),n.url=n.selectListingUrl,n.selectDefaultCreating&&(n.url=n.selectCreatingUrl),this.BottomSheets.open(n,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return n.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return n.render(this.SELECT_MANY_HINT,t)},initItems:function(){var e,i=this.$bottomsheets.find("tbody tr"),o=this.SELECT_MANY_SELECTED_ICON,n=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+a).each(function(){r.push(t(this).data().primaryKey)}),i.each(function(){var i=t(this),s=i.find("td:first");e=i.data().primaryKey,"-1"!=r.indexOf(e)?(i.addClass("is_selected"),s.append(o)):s.append(n)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+a).length}},updateHint:function(e){var i;t.extend(e,this.bottomsheetsData),i=this.renderHint(e),this.$bottomsheets.find(".qor-selectmany__hint").remove(),this.$bottomsheets.find(".qor-page__body").before(i)},updateSelectInputData:function(i){var o,r,s,l=i||this.$selectFeild,d=l.find("[data-primary-key]").not("."+a),c=i?i.find(".qor-field__selectmany-input"):this.$selector,u=c.find("option");u.prop("selected",!1),d.each(function(){s=t(this).data().primaryKey,o=u.filter('[value="'+s+'"]'),o.length||(r={primaryKey:s,displayName:""},o=t(n.render(e.SELECT_MANY_OPTION_TEMPLATE,r)),c.append(o)),o.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(".qor-selected-many__remove").click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(i,o){var r,s=this.renderSelectMany(i),l=this.$selectFeild.find('[data-primary-key="'+i.primaryKey+'"]');return l.length?l.hasClass(a)?(l.removeClass(a),this.updateSelectInputData(),void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(s),o?(r=t(n.render(e.SELECT_MANY_OPTION_TEMPLATE,i)),r.appendTo(this.$selector),r.prop("selected",!0),this.$bottomsheets.remove(),void(t(".qor-bottomsheets").is(":visible")||t("body").removeClass("qor-bottomsheets-open"))):void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(d),this.$bottomsheets=t,this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){if(t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],e)return void this.addItem(t,!0);var i,o=t.$clickElement;o.toggleClass("is_selected"),i=o.hasClass("is_selected"),i?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var o,n=t(this),s=n.data(r);if(!s){if(/destroy/.test(i))return;n.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(o=s[i])&&o.apply(s)})},t(function(){var i='[data-toggle="qor.selectmany"]';t(document).on("disable.qor.selectone",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.selectone",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.selectone")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=t("body"),o=t(document),n=window.Mustache,r="qor.selectone",s="click."+r,a="qor-bottomsheets__select-one";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){o.on("reload.qor.bottomsheets","."+a,this.reloadData.bind(this)),this.$element.on(s,".qor-selected__remove",this.clearSelect.bind(this)).on(s,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(s,".qor-selected__change",this.changeSelect)},unbind:function(){o.off(s,"[data-selectone-url]").off("reload.qor.bottomsheets","."+a),this.$element.off(s,".qor-selected__remove").off(s,".qor-selected__change")},clearSelect:function(e){var i=t(e.target),o=i.closest(".qor-field__selectone");return o.find(".qor-field__selected").remove(),o.find(".qor-field__selectone-input").html(""),o.find(".qor-field__selectone-input")[0].value="",o.find(".qor-field__selectone-trigger").show(),o.trigger("qor.selectone.unselected"),!1},changeSelect:function(){t(this).closest(".qor-field__selectone").find(".qor-field__selectone-trigger").trigger("click")},openBottomSheets:function(e){var o=t(e.target),n=o.data();this.BottomSheets=i.data("qor.bottomsheets"),this.$parent=o.closest(".qor-field__selectone"),n.url=n.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=t('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(n,this.handleSelectOne.bind(this))},initItem:function(){var t,e=this.$parent.find(".qor-field__selected");e.length&&(t=e.data().primaryKey)&&this.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass("is_selected").find("td:first").append(this.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(e){return n.render(t('[name="select-one-selected-template"]').html(),e)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(a),this.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(i){var o,r=this.$parent,s=r.find("select"),a=r.find(".qor-field__selected");i.displayName=i.Text||i.Name||i.Title||i.Code||i[Object.keys(i)[0]],i.selectoneValue=i.primaryKey||i.ID,s.length&&(o=this.renderSelectOne(i),a.length&&a.remove(),r.prepend(o),r.find(".qor-field__selectone-trigger").hide(),s.html(n.render(e.SELECT_ONE_OPTION_TEMPLATE,i)),s[0].value=i.primaryKey||i.ID,r.trigger("qor.selectone.selected",[i]),this.$bottomsheets.qorSelectCore("destroy").remove(),t(".qor-bottomsheets").is(":visible")||t("body").removeClass("qor-bottomsheets-open"))},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var o,n=t(this),s=n.data(r);if(!s){if(/destroy/.test(i))return;n.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(o=s[i])&&o.apply(s)})},t(function(){var i='[data-toggle="qor.selectone"]';t(document).on("disable.qor.selectone",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.selectone",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.selectone")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),o="qor.selector",n="click."+o;return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,o=t(e.TEMPLATE),n=this.options.aligned+"-aligned",r={},s=i.data(),a=s.hover,l=i.attr("name");this.isBottom="bottom"==s.position,a&&o.addClass("hover"),o.addClass(n).find(".qor-selector-menu").html(function(){var e=[];return i.children().each(function(){var i=t(this),o=i.attr("selected"),n=i.attr("disabled"),s=i.attr("value"),a=i.text(),d=[];o&&(d.push("selected"),r.value=s,r.label=a,r.paramName=l),n&&d.push("disabled"),e.push("<li"+(d.length?' class="'+d.join(" ")+'"':"")+' data-value="'+s+'" data-label="'+a+'" data-param-name="'+l+'">'+a+"</li>")}),e.join("")}),this.$selector=o,i.hide().after(o),o.find(".qor-selector-toggle").data("paramName",l),this.pick(r,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(n,t.proxy(this.click,this)),i.on(n,t.proxy(this.close,this))},unbind:function(){this.$selector.off(n,this.click)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(".qor-selector-clear")?this.clear():i.is("li")?(i.hasClass("selected")||i.hasClass("disabled")||this.pick(i.data()),this.close()):i.closest(".qor-selector-toggle").length&&this.open()},pick:function(e,i){var o=this.$selector,n=!!e.value,r=this.$element;o.find(".qor-selector-toggle").toggleClass("active",n).toggleClass("clearable",n&&this.options.clearable).find(".qor-selector-label").text(e.label||this.placeholder),i||(o.find(".qor-selector-menu").children('[data-value="'+e.value+'"]').addClass("selected").siblings(".selected").removeClass("selected"),r.val(e.value),r.closest(".qor-bottomsheets").length&&!r.closest('[data-toggle="qor.filter"]').length?t(".qor-bottomsheets").trigger("selectorChanged.qor.selector",[e.value,e.paramName]):r.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(".qor-selector-toggle").removeClass("active").removeClass("clearable").find(".qor-selector-label").text(this.placeholder).end().end().find(".qor-selector-menu").children(".selected").removeClass("selected"),t.val("").trigger("change")},open:function(){i.triggerHandler(n),t(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(o)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var n,r,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;n=t.extend({},e.DEFAULTS,s.data(),"object"===(void 0===i?"undefined":_typeof(i))&&i),s.data(o,a=new e(this,n))}"string"==typeof i&&t.isFunction(r=a[i])&&r.apply(a)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on("disable.qor.selector",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.selector",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.selector")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){var i="string"==typeof t?document.getElementById(t):t,o=i.cloneNode(!1);return o.innerHTML=e,i.parentNode.replaceChild(o,i),o}function i(e,i){var o=[],n="href";return i&&(n="src"),e.each(function(){o.push(t(this).attr(n))}),u.uniq(o)}function o(e,i){var o=t.fn.qorSliderAfterShow;for(var n in o)o.hasOwnProperty(n)&&!o[n].isLoaded&&(o[n].isLoaded=!0,o[n].call(this,e,i))}function n(e,i,n){for(var r=0,s=0,a=e.length;s<a;s++){var l=document.createElement("script");l.onload=function(){r++,r===e.length&&t.isFunction(n)&&n(),i&&i.url&&i.response&&o(i.url,i.response)},l.src=e[s],document.body.appendChild(l)}}function r(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&r(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function s(e){var o=t("script"),n=i(e,!0),r=i(o,!0);return u.difference(n,r)}function a(e){var o=t("link"),n=i(e),r=i(o);return u.difference(n,r)}function l(e,i){this.$element=t(e),this.options=t.extend({},l.DEFAULTS,t.isPlainObject(i)&&i),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}var d=t(document),c=window.FormData,u=window._,h=window.QOR,f="qor.slideout";return l.prototype={constructor:l,init:function(){this.build(),this.bind()},build:function(){var e;this.$slideout=e=t(l.TEMPLATE).appendTo("body"),this.$slideoutTemplate=e.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on("submit.qor.slideout","form",this.submit.bind(this)).on("click.qor.slideout",".qor-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on("click.qor.slideout",'[data-dismiss="slideout"]',this.hide.bind(this)),d.on("keyup.qor.slideout",t.proxy(this.keyup,this))},unbind:function(){this.$slideout.off("submit.qor.slideout",this.submit).off("click.qor.slideout"),d.off("keyup.qor.slideout",this.keyup)},keyup:function(e){if(27===e.which){if(t(".qor-bottomsheets").is(":visible")||t(".qor-modal").is(":visible")||t("#redactor-modal-box").length||t("#dialog").is(":visible"))return;this.hide(),this.removeSelectedClass()}},loadExtraResource:function(t){var e=a(t.$links),i=s(t.$scripts);e.length&&r(e),i.length&&n(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){t(".qor-body__loading").remove(),t(l.TEMPLATE_LOADING).appendTo(t("body")).trigger("enable.qor.material")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},submit:function(e){var i=this.$slideout,o=e.target,n=t(o),r=this,s=t(h.$formLoading),a=n.find(":submit");i.trigger("slideoutBeforeSend.qor.slideout"),c&&(e.preventDefault(),this.submitXHR=t.ajax(n.prop("action"),{method:n.prop("method"),data:new c(o),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){t(".qor-submit-loading").remove(),s.appendTo(a.prop("disabled",!0).closest(".qor-form__actions")).trigger("enable.qor.material"),t.fn.qorSlideoutBeforeHide=null},success:function(){var t=n.data("returnUrl"),e=n.data("refreshUrl");return i.trigger("slideoutSubmitComplete.qor.slideout"),e?void(window.location.href=e):"refresh"==t?void r.refresh():void(t&&"refresh"!=t?r.load(t):r.refresh())},error:function(t){h.handleAjaxError(t)},complete:function(){a.prop("disabled",!1)}}))},load:function(i,o){var l,d,c,u,h=this.options,f=this.$slideout;i&&(o=t.isPlainObject(o)?o:{},l=o.method?o.method:"GET",d=o.datatype?o.datatype:"html",c=t.proxy(function(){t.ajax(i,{method:l,dataType:d,cache:!0,ifModified:!0,success:t.proxy(function(d){var c=void 0,p=void 0,m=void 0,b=void 0,y=void 0,g=void 0;if(t(".qor-body__loading").remove(),"GET"===l){if(c=t(d),p=c.find(".mdl-layout__content.qor-page"),m=p.find(".qor-form-container"),this.slideoutType=m.length&&m.data().slideoutType,!p.length)return;var v=d.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(v){v=v.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),g=t(v).prop("class"),t("body").addClass(g);var q={$scripts:c.filter("script"),$links:c.filter("link"),url:i,response:d};this.loadExtraResource(q)}if(p.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),b=s(p.find("script[src]")),y=a(p.find("link[href]")),b.length){n(b,{url:i,response:d},function(){})}y.length&&r(y),p.find("script[src],link[href]").remove(),f.html(this.$slideoutTemplate),u=f.find(".qor-slideout__title"),this.$body=f.find(".qor-slideout__body"),u.html(c.find(h.title).html()),e(f.find(".qor-slideout__body")[0],p.html()),this.$body.find(".qor-actions__locale").remove(),f.one("shown.qor.slideout",function(){t(this).trigger("enable")}).one("hidden.qor.slideout",function(){t(this).trigger("disable")}),f.find(".qor-slideout__opennew").attr("href",i),this.show();var _=t.fn.qorSliderAfterShow;if(_)for(var w in _)_.hasOwnProperty(w)&&t.isFunction(_[w])&&(_[w].isLoaded=!0,_[w].call(this,i,d));f.trigger("slideoutLoaded.qor.slideout",[i,d])}else o.returnUrl?this.load(o.returnUrl):this.refresh()},this),error:t.proxy(function(){var e;t(".qor-body__loading").remove(),e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(e)},this)})},this),this.slided?(this.hide(!0),this.$slideout.one("hidden.qor.slideout",c)):c())},open:function(t){this.addLoading(),this.load(t.url,t.data)},reload:function(t){this.hide(),this.load(t)},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event("show.qor.slideout"),i.trigger(e),e.isDefaultPrevented()||(i.removeClass("qor-slideout-mini"),"mini"==this.slideoutType&&i.addClass("qor-slideout-mini"),i.addClass("is-shown").get(0).offsetWidth,i.one("transitionend",t.proxy(this.shown,this)).addClass("is-slided").scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass("qor-slideout-open"),this.$slideout.trigger("beforeEnable.qor.slideout").trigger("shown.qor.slideout").trigger("afterEnable.qor.slideout")},hide:function(){var e={confirm:"You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes. Are you sure you want to close the slideout?"};t.fn.qorSlideoutBeforeHide?h.qorConfirm(e,function(t){t&&this.hideSlideout()}.bind(this)):this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var e,i=this.$slideout,o=t(".qor-datepicker").not(".hidden");window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,this.submitXHR&&this.submitXHR.abort(),o.length&&o.addClass("hidden"),this.slided&&(e=t.Event("hide.qor.slideout"),i.trigger(e),e.isDefaultPrevented()||(i.one("transitionend",t.proxy(this.hidden,this)).removeClass("is-slided qor-slideout__fullscreen"),i.trigger("slideoutClosed.qor.slideout")))},hidden:function(){this.slided=!1,t("body").removeClass("qor-slideout-open"),this.$slideout.removeClass("is-shown").trigger("hidden.qor.slideout")},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(f)}},l.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},l.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',l.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',l.plugin=function(e){return this.each(function(){var i,o=t(this),n=o.data(f);if(!n){if(/destroy/.test(e))return;o.data(f,n=new l(this,e))}"string"==typeof e&&t.isFunction(i=n[e])&&i.apply(n)})},t.fn.qorSlideout=l.plugin,l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=window.location;return e.prototype={constructor:e,init:function(){this.$element.addClass("is-sortable"),this.bind()},bind:function(){this.$element.on("click.qor.sorter","> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off("click.qor.sorter",this.sort)},sort:function(e){var o=t(e.currentTarget),n=o.data("orderBy"),r=i.search,s="order_by="+n;n&&(/order_by/.test(r)?r=r.replace(/order_by(=\w+)?/,function(){return s}):r+=r.indexOf("?")>-1?"&"+s:s,i.search=r)},destroy:function(){this.unbind(),this.$element.removeClass("is-sortable").removeData("qor.sorter")}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,n=t(this),r=n.data("qor.sorter");if(!r){if(/destroy/.test(i))return;n.data("qor.sorter",r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){t(document).on("disable.qor.sorter",function(i){e.plugin.call(t(".qor-js-table",i.target),"destroy")}).on("enable.qor.sorter",function(i){e.plugin.call(t(".qor-js-table",i.target))}).triggerHandler("enable.qor.sorter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i=window._,o=t("body"),n="click.qor.tabbar",r=".qor-layout__tab-button",s=".mdl-layout__tab-bar-container";return e.prototype={constructor:e,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(n,r,this.switchTab.bind(this)),this.$element.on(n,".qor-layout__tab-right",this.scrollTabRight.bind(this)),this.$element.on(n,".qor-layout__tab-left",this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(n,r,this.switchTab),this.$element.off(n,".qor-layout__tab-right",this.scrollTabRight),this.$element.off(n,".qor-layout__tab-left",this.scrollTabLeft)},initTab:function(){var n=this.$element.data();n.scopeActive?o.data("tabScopeActive",n.scopeActive):(t(r).first().addClass("is-active"),o.data("tabScopeActive",t(r).first().data("name"))),this.tabWidth=0,this.slideoutWidth=t(".qor-layout__tab-content").outerWidth(),i.each(t(r),function(e){this.tabWidth=this.tabWidth+t(e).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(s).append(e.ARROW_RIGHT)},scrollTabLeft:function(e){e.stopPropagation();var i=t(s),o=i.scrollLeft(),n=o-this.slideoutWidth;o>0&&i.animate({scrollLeft:n},400,function(){t(".qor-layout__tab-right").show(),0==i.scrollLeft()&&t(".qor-layout__tab-left").hide()})},scrollTabRight:function(i){i.stopPropagation();var o=t(s),n=o.scrollLeft(),r=this.tabWidth,a=this.slideoutWidth,l=n+a;l<r&&(o.animate({scrollLeft:l},400,function(){t(".qor-layout__tab-left").show(),o.scrollLeft()+a>=r&&t(".qor-layout__tab-right").hide()}),!t(".qor-layout__tab-left").length&&this.$element.find(s).prepend(e.ARROW_LEFT))},switchTab:function(e){var i=t(e.target),n=this.$element,s=i.data(),a=o.data().tabScopeActive;if(t(".qor-slideout").is(":visible"))return!i.hasClass("is-active")&&(n.find(r).removeClass("is-active"),i.addClass("is-active"),t.ajax(s.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){t(".qor-layout__tab-spinner").remove(),t(".qor-layout__tab-content").hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(t(".qor-layout__tab-spinner")[0])},success:function(e){t(".qor-layout__tab-spinner").remove(),o.data("tabScopeActive",i.data("name"));var n=t(e).find(".qor-layout__tab-content").html();t(".qor-layout__tab-content").show().html(n).trigger("enable")},error:function(){t(".qor-layout__tab-spinner").remove(),o.data("tabScopeActive",a)}}),!1)},destroy:function(){this.unbind(),o.removeData("tabScopeActive")}},e.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',e.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,n=t(this),r=n.data("qor.tabbar");if(!r){if(/destroy/.test(i))return;n.data("qor.tabbar",r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){t(document).on("disable.qor.tabbar",function(i){e.plugin.call(t('[data-toggle="qor.tab"]',i.target),"destroy")}).on("enable.qor.tabbar",function(i){e.plugin.call(t('[data-toggle="qor.tab"]',i.target))}).triggerHandler("enable.qor.tabbar")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend(!0,{},e.DEFAULTS,t.isPlainObject(n)&&n),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(o),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}var i="qor.timepicker",o="[data-picker-type]";return e.prototype={init:function(){if(this.$targetInput.is(":disabled"))return void this.$element.remove();this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){var e={timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"};this.isDateTimePicker&&this.$targetInput.qorTimepicker(e).on("selectTime.qor.timepicker",t.proxy(this.changeTime,this)).on("blur.qor.timepicker",t.proxy(this.blur,this)).on("focus.qor.timepicker",t.proxy(this.focus,this)).on("keydown.qor.timepicker",t.proxy(this.keydown,this)),this.$element.on("click.qor.timepicker",t.proxy(this.show,this))},unbind:function(){this.$element.off("click.qor.timepicker",this.show),this.isDateTimePicker&&this.$targetInput.off("selectTime.qor.timepicker",this.changeTime).off("blur.qor.timepicker",this.blur).off("focus.qor.timepicker",this.focus).off("keydown.qor.timepicker",this.keydown)},focus:function(){},blur:function(){var t,e,i,o,n,r,s=this.$targetInput.val(),a=s.split(" "),l=a.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(s){if(1==l)c.test(a[0])&&(e=a[0],i="00:00"),d.test(a[0])&&(e=this.dateValueNow,i=a[0]);else for(var u=0;u<l;u++){o=c.test(a[u]),n=d.test(a[u]),o&&(e=a[u],r="-"),n&&(i=a[u],r=":"),t=a[u].split(r);for(var h=0;h<t.length;h++)t[h].length<2&&(t[h]="0"+t[h]);o&&(e=t.join(r)),n&&(i=t.join(r))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(t.keyCode)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},
changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,o=/\d{1,2}:\d{1,2}/,n=o.test(i),r=e.data().timepickerList.find(".ui-timepicker-selected").html();t=i?n?i.replace(o,r):i+" "+r:this.dateValueNow+" "+r,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(i)}},e.DEFAULTS={},e.plugin=function(o){return this.each(function(){var n,r,s=t(this),a=s.data(i);if(!a){if(!t.fn.qorDatepicker)return;if(/destroy/.test(o))return;n=t.extend(!0,{},s.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),s.data(i,a=new e(this,n))}"string"==typeof o&&t.isFunction(r=a[o])&&r.apply(a)})},t(function(){var i='[data-toggle="qor.timepicker"]';t(document).on("disable.qor.timepicker",function(o){e.plugin.call(t(i,o.target),"destroy")}).on("enable.qor.timepicker",function(o){e.plugin.call(t(i,o.target))}).triggerHandler("enable.qor.timepicker")}),e});