"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(e){function t(r,i){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,e.isPlainObject(i)&&i),this.init()}var r=window.location,i=e(document),n="click.qor.filter";return t.prototype={constructor:t,init:function(){this.bind();var t=this.$element;this.$scheduleTime=t.find(".qor-filter__scheduled-time"),this.$searchButton=t.find(this.options.button),this.$trigger=t.find(this.options.trigger),this.publishReadyOff=e("#qor-publishready__off").data().label},bind:function(){var e=this.options;this.$element.on(n,e.trigger,this.show.bind(this)).on(n,e.clear,this.clear.bind(this)).on(n,e.button,this.search.bind(this)),i.on(n,this.close)},unbind:function(){var e=this.options;this.$element.off(n,e.trigger,this.show.bind(this)).off(n,e.clear,this.clear.bind(this)).off(n,e.button,this.search.bind(this))},show:function(){this.$element.find(".qor-filter__dropdown").toggle()},close:function(t){var r=e(t.target),i=e(".qor-filter__dropdown"),n=i.is(":visible"),o=r.closest(".qor-filter__dropdown").length,a=r.closest(".qor-filter-toggle").length,l=r.closest(".qor-modal").length,s=r.closest(".ui-timepicker-wrapper").length;n&&(o||a||l||s)||i.hide()},clear:function(t){var r=e(t.target),i=this.$trigger,n=i.find(".qor-selector-label"),o=i.find(".qor-publishready-label");return r.data().type?(o.html("").parent().hide(),e('[name="QorResource.PublishReady"]').prop("checked",!1)):(n.parent().hide(),this.$scheduleTime.val("")),r.remove(),this.$searchButton.click(),!1},getUrlParameter:function(e){var t=r.search;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=i.exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},updateQueryStringParameter:function(e,t,i){var n=i||r.href,o=String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp("([?&])"+o+"=.*?(&|$)","i"),l=-1!==n.indexOf("?")?"&":"?";return n.match(a)?n.replace(a,"$1"+e+"="+t+"$2"):n+l+e+"="+t},search:function(){var t,r=this.$element.find("[data-search-param]"),i=this;r.length&&(r.each(function(){var r=e(this),n=r.data().searchParam,o=r.find('[name="QorResource.PublishReady"]').is(":checked"),a=r.val();"publish_draft_content"==n&&(a=o?"true":""),t=i.updateQueryStringParameter(n,a,t)}),window.location.href=t)},destroy:function(){this.unbind(),this.$element.removeData("qor.filter")}},t.DEFAULTS={trigger:!1,button:!1,clear:!1},t.plugin=function(r){return this.each(function(){var i,n=e(this),o=n.data("qor.filter");if(!o){if(/destroy/.test(r))return;n.data("qor.filter",o=new t(this,r))}"string"==typeof r&&e.isFunction(i=o[r])&&i.apply(o)})},e(function(){var r='[data-toggle="qor.filter.time"]',i={trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};e(document).on("disable.qor.filter",function(i){t.plugin.call(e(r,i.target),"destroy")}).on("enable.qor.filter",function(n){t.plugin.call(e(r,n.target),i)}).triggerHandler("enable.qor.filter")}),t});